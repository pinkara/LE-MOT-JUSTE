<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Mot Juste - Arcade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Importation des polices Orbitron (futuriste) et VT323 (rétro terminal) -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@700;900&family=VT323&display=swap"
        rel="stylesheet">

    <style>
        /* --- DESIGN INSPIRÉ DE KANJI DE GO --- */

        body {
            /* REMPLACÉ Inter par Orbitron pour donner un ton immédiatement arcade/futuriste */
            font-family: 'Orbitron', sans-serif;
            background-color: #000000;
            /* Fond noir pour l'espace */
            color: #f3f4f6;
            /* text-gray-100 */
            overflow: hidden;
            /* Thème par défaut (Niveau 1) */
            --bg-color-1: #1e3a8a;
            /* blue-800 */
            --bg-color-2: #312e81;
            /* indigo-900 */
            --accent-color: #3b82f6;
            /* blue-500 */
            --hud-bg: rgba(0, 0, 0, 0.4);
            --text-color: #ffffff;
            --input-bg: #1f2937;
            /* gray-800 */
            --input-border: #3b82f6;
            /* blue-500 */
        }

        /* Thèmes pour les 4 phases (basés sur les niveaux 1-8) */
        body.theme-phase-1 {
            /* Niveaux 1-2 */
            --bg-color-1: #1e3a8a;
            /* blue-800 */
            --bg-color-2: #312e81;
            /* indigo-900 */
            --accent-color: #3b82f6;
            /* blue-500 */
            --input-border: #3b82f6;
        }

        body.theme-phase-2 {
            /* Niveaux 3-4 */
            --bg-color-1: #4a044e;
            /* purple-900 */
            --bg-color-2: #701a75;
            /* fuchsia-900 */
            --accent-color: #a21caf;
            /* fuchsia-600 */
            --input-border: #a21caf;
        }

        body.theme-phase-3 {
            /* Niveaux 5-6 */
            --bg-color-1: #4c1d95;
            /* violet-900 */
            --bg-color-2: #581c87;
            /* purple-900 */
            --accent-color: #a855f7;
            /* purple-500 */
            --input-border: #a855f7;
        }

        /* Thème 4 = BOSS */
        body.theme-phase-4 {
            /* Niveaux 7-8 */
            --bg-color-1: #991b1b;
            /* red-800 */
            --bg-color-2: #7f1d1d;
            /* red-900 */
            --accent-color: #ef4444;
            /* red-500 */
            --input-border: #ef4444;
        }

        /* --- FOND ANIMÉ "STARFIELD" --- */
        #animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* Le gradient est le "ciel" lointain */
            background: linear-gradient(135deg, var(--bg-color-1), var(--bg-color-2));
            transition: background 0.5s ease-out;
            overflow: hidden;
            perspective: 600px;
            /* Ajoute de la perspective */
        }

        /* Conteneurs pour les 3 couches d'étoiles */
        #stars-small,
        #stars-medium,
        #stars-large {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 1px;
            height: 1px;
            background: transparent;
            /* box-shadow sera généré par JS */
            animation-name: move-stars;
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }

        #stars-small {
            animation-duration: 20s;
        }

        #stars-medium {
            width: 2px;
            height: 2px;
            animation-duration: 40s;
        }

        #stars-large {
            width: 3px;
            height: 3px;
            animation-duration: 60s;
        }

        /* Animation des étoiles */
        @keyframes move-stars {
            from {
                transform: translateY(-1000px);
            }

            to {
                transform: translateY(1000px);
            }
        }

        /* --- MODE BOSS --- */
        /* Accélération des étoiles pour le mode BOSS */
        body.boss-battle #stars-small {
            animation-duration: 7s;
        }

        body.boss-battle #stars-medium {
            animation-duration: 15s;
        }

        body.boss-battle #stars-large {
            animation-duration: 25s;
        }


        /* Police "Jeu Vidéo" pour les titres et le HUD */
        .font-game {
            /* RECONFIRMATION: Orbitron est appliqué ici */
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 5px var(--accent-color), 0 0 10px rgba(255, 255, 255, 0.3);
            letter-spacing: 0.05em;
        }

        /* Police Arcade pour les définitions et l'entrée de texte */
        .font-arcade-text {
            /* RECONFIRMATION: VT323 (police terminal) est appliqué ici */
            font-family: 'VT323', monospace;
            font-size: 2rem;
            line-height: 1.5;
            color: #f3f4f6;
            /* text-gray-100 */
            white-space: pre-wrap;
        }

        .game-screen {
            display: none;
            width: 100%;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transform: scale(0.98);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
        }

        .visible {
            display: flex;
            opacity: 1;
            transform: scale(1);
        }

        .game-screen.center-col {
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: transparent;
        }

        /* --- Écrans Menu & Sélection --- */
        .menu-title {
            /* RECONFIRMATION: Orbitron est bien la police du titre */
            font-family: 'Orbitron', sans-serif;
            font-size: 4rem;
            font-weight: 700;
            color: white;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
            border-bottom: 4px solid var(--accent-color);
            padding-bottom: 0.5rem;
        }

        .menu-subtitle {
            font-game text-4xl text-white mb-8;
        }

        .menu-btn {
            /* RECONFIRMATION: Orbitron est appliqué aux boutons de menu */
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            background: #374151;
            /* gray-700 */
            border: 2px solid #4b5563;
            /* gray-600 */
            padding: 1rem 2.5rem;
            border-radius: 8px;
            min-width: 350px;
            text-align: center;
            transition: all 0.2s ease-out;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin-bottom: 1rem;
        }

        .menu-btn:not(:disabled):hover {
            background: #4b5563;
            /* gray-600 */
            border-color: var(--accent-color);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .menu-btn:not(:disabled):active {
            transform: translateY(0px) scale(0.98);
        }

        .menu-btn.back-btn {
            margin-top: 1rem;
            background: transparent;
            border-color: #4b5563;
            min-width: 0;
            color: #9ca3af;
            /* gray-400 */
            font-size: 1rem;
        }

        .menu-btn.back-btn:hover {
            background: #1f2937;
            /* gray-800 */
            color: white;
        }

        .selection-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
            max-width: 750px;
        }

        .selection-grid .menu-btn {
            min-width: 0;
            margin-bottom: 0;
        }

        @media (min-width: 768px) {
            .selection-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* --- Monde du Jeu --- */
        #game-world {
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: transparent;
        }

        /* --- 1. HUD (Haut) --- */
        #game-hud {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--hud-bg);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--accent-color);
            box-shadow: 0 0 15px var(--accent-color) inset;
        }

        .hud-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .hud-label {
            /* RECONFIRMATION: Orbitron pour les labels du HUD */
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            color: var(--accent-color);
        }

        .hud-value {
            /* RECONFIRMATION: Orbitron pour les valeurs du HUD */
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-color);
        }

        #hud-question-count {
            min-width: 80px;
            text-align: right;
        }

        /* --- 2. Arène de Jeu (Milieu) --- */
        #game-arena {
            flex-grow: 1;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            /* Pour les overlays */
        }

        #question-container {
            background: rgba(17, 24, 39, 0.8);
            /* gray-900/80 */
            border: 2px solid var(--accent-color);
            border-radius: 12px;
            padding: 2rem;
            max-width: 900px;
            width: 90%;
            min-height: 250px;
            color: var(--text-color);
            box-shadow: 0 0 20px var(--accent-color), 0 0 30px rgba(0, 0, 0, 0.5) inset;

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            text-align: center;

            transform: scale(0.5);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        #question-container.visible {
            transform: scale(1);
            opacity: 1;
        }

        #definition-content {
            width: 100%;
            text-align: left;
        }

        /* Style pour le caret */
        #typing-caret {
            font-family: 'VT323', monospace;
            font-weight: bold;
            color: var(--accent-color);
            animation: blink 1s step-end infinite;
            font-size: 2rem;
            /* Doit correspondre à .font-arcade-text */
            margin-left: 2px;
            opacity: 1;
        }

        @keyframes blink {

            from,
            to {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }


        /* Conteneur pour les options d'expression */
        #expression-options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            width: 100%;
        }

        .expression-btn {
            /* UTILISATION d'Orbitron pour les boutons */
            font-family: 'Orbitron', sans-serif;
            background: #374151;
            /* gray-700 */
            border: 2px solid #4b5563;
            /* gray-600 */
            color: white;
            font-size: 1.25rem;
            padding: 1.5rem;
            border-radius: 8px;
            transition: all 0.2s ease;
            text-align: center;
        }

        .expression-btn:not(:disabled):hover {
            background: #4b5563;
            /* gray-600 */
            border-color: var(--accent-color);
        }

        .expression-btn:not(:disabled):active {
            transform: scale(0.97);
        }

        .expression-btn.correct {
            background: #166534;
            /* green-800 */
            border-color: #22c55e;
            /* green-500 */
        }

        .expression-btn.wrong {
            background: #991b1b;
            /* red-800 */
            border-color: #ef4444;
            /* red-500 */
            animation: shake 0.5s ease-in-out;
        }

        .expression-btn:disabled {
            opacity: 0.7;
        }

        /* --- 3. Barre de Saisie (Bas) --- */
        #input-container {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            position: relative;
            /* Pour la boîte de résultat */
            height: 120px;
            /* Hauteur fixe pour éviter le saut de page */
        }

        /* Saisie de mot (au centre) */
        #word-input-area {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            flex-direction: column;
            gap: 0.5rem;
        }

        #answer-input {
            width: 100%;
            max-width: 600px;
            background: var(--input-bg);
            border: 2px solid #4b5563;
            /* gray-600 */
            border-radius: 8px;
            color: var(--text-color);
            /* RECONFIRMATION FONT: Force VT323 (police terminal) pour l'input */
            font-family: 'VT323', monospace;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            padding: 0.75rem;
            outline: none;
            transition: all 0.2s ease;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5) inset;
        }

        #answer-input:focus {
            border-color: var(--input-border);
            box-shadow: 0 0 15px var(--input-border), 0 0 10px rgba(0, 0, 0, 0.5) inset;
        }

        #hint-text {
            /* UTILISATION d'Orbitron pour l'indice */
            font-family: 'Orbitron', sans-serif;
            color: #2dd4bf;
            /* teal-400 */
            font-size: 1.1rem;
            font-weight: 600;
            height: 1.5rem;
            /* Empêche le saut de page */
        }

        /* Boutons d'action (coins) */
        .action-btn {
            /* UTILISATION d'Orbitron pour les boutons d'action */
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: white;
            background: #374151;
            /* gray-700 */
            border: 2px solid #4b5563;
            /* gray-600 */
            border-radius: 8px;
            padding: 0.75rem 1rem;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
        }

        .action-btn:not(:disabled):hover {
            background: #4b5563;
            /* gray-600 */
            border-color: var(--accent-color);
        }

        .action-btn:not(:disabled):active {
            transform: scale(0.97);
        }

        .action-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        #joker-button {
            border-color: #f59e0b;
            /* amber-500 */
        }

        #joker-button:not(:disabled):hover {
            border-color: #fcd34d;
            /* amber-300 */
        }

        #joker-button:disabled {
            border-color: #7f1d1d;
            /* red-900 */
        }

        #hint-button {
            border-color: #2dd4bf;
            /* teal-400 */
        }

        #hint-button:not(:disabled):hover {
            border-color: #5eead4;
            /* teal-300 */
        }

        #second-meaning-button {
            border-color: #22d3ee;
            /* cyan-400 */
        }

        #second-meaning-button:not(:disabled):hover {
            border-color: #67e8f9;
            /* cyan-300 */
        }

        /* --- 4. Overlays et Popups --- */

        #result-box {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 900px;
            background: rgba(10, 10, 20, 0.9);
            border: 2px solid;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);

            display: none;
            /* Caché par défaut */
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }

        #result-box.visible {
            display: block;
            opacity: 1;
        }

        #result-box.correct {
            border-color: #22c55e;
            /* green-500 */
        }

        #result-box.wrong {
            border-color: #ef4444;
            /* red-500 */
        }

        #result-box.pass {
            border-color: #f59e0b;
            /* amber-500 */
        }

        #result-word {
            /* RECONFIRMATION: Orbitron pour le mot de résultat */
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
        }

        #result-definition {
            /* RECONFIRMATION: VT323 (police terminal) pour la définition de résultat */
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #d1d5db;
            /* gray-300 */
            margin-top: 0.5rem;
        }

        /* Overlay de Transition de Niveau / BOSS */
        #level-transition-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-out;
        }

        #level-transition-overlay.visible {
            opacity: 1;
            pointer-events: all;
        }

        #level-transition-text {
            /* RECONFIRMATION: Orbitron pour le texte de transition */
            font-family: 'Orbitron', sans-serif;
            font-size: 6rem;
            font-weight: 900;
            color: white;
            text-shadow: 0 0 10px white, 0 0 20px var(--accent-color), 0 0 30px var(--accent-color);
            transform: scale(0.5);
            opacity: 0;
            transition: all 0.5s ease-out;
            animation: none;
        }

        #level-transition-overlay.visible #level-transition-text {
            transform: scale(1);
            opacity: 1;
        }

        #level-transition-text.boss {
            color: #ef4444;
            /* red-500 */
            text-shadow: 0 0 10px #f00, 0 0 20px #f00, 0 0 30px #f00, 0 0 50px #fff;
            animation: pulse-boss 1s infinite ease-in-out;
        }

        @keyframes pulse-boss {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.05);
                opacity: 0.9;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        #feedback-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            pointer-events: none;
            z-index: 90;
        }

        #feedback-overlay.flash-correct {
            animation: flash-correct 0.4s ease-out;
        }

        #feedback-overlay.flash-wrong {
            animation: flash-wrong 0.4s ease-out;
        }

        @keyframes flash-correct {
            0% {
                background: rgba(255, 255, 255, 0.8);
                opacity: 1;
            }

            100% {
                background: rgba(255, 255, 255, 0);
                opacity: 0;
            }
        }

        @keyframes flash-wrong {
            0% {
                background: rgba(239, 68, 68, 0.7);
                opacity: 1;
            }

            50% {
                background: rgba(239, 68, 68, 0.7);
                opacity: 1;
            }

            100% {
                background: rgba(239, 68, 68, 0);
                opacity: 0;
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-8px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(8px);
            }
        }

        .shake-error {
            animation: shake 0.5s ease-in-out;
            border-color: #ef4444 !important;
        }
    </style>
</head>

<body>
    <!-- Fond animé "Starfield" -->
    <div id="animated-bg">
        <div id="stars-small"></div>
        <div id="stars-medium"></div>
        <div id="stars-large"></div>
    </div>

    <!-- Écran 1: Menu Principal -->
    <section id="menu-screen" class="game-screen center-col visible">
        <!-- Orbitron pour le titre -->
        <h1 class="menu-title">Le Mot Juste</h1>
        <!-- Orbitron pour le sous-titre -->
        <h2 class="font-game text-2xl text-gray-400 mb-8 tracking-widest">ÉDITION ARCADE</h2>

        <!-- Orbitron pour les boutons via .menu-btn -->
        <button id="campaign-btn" class="menu-btn">
            Campagne
        </button>
        <button id="training-btn" class="menu-btn">
            Mode Entraînement
        </button>
    </section>

    <!-- Écran 2: Sélection Palier -->
    <section id="palier-select-screen" class="game-screen center-col">
        <!-- Orbitron -->
        <h2 class="font-game text-4xl text-white mb-8">Mode Campagne</h2>
        <div class="selection-grid !grid-cols-1 !max-w-md">
            <button class="menu-btn !min-w-0" data-palier="Normal">Normal <span class="text-sm block text-gray-400">Niv
                    1-4</span></button>
            <button class="menu-btn !min-w-0" data-palier="Hard">Hard <span class="text-sm block text-gray-400">Niv
                    2-5</span></button>
            <button class="menu-btn !min-w-0" data-palier="Hardcore">Hardcore <span
                    class="text-sm block text-gray-400">Niv 3-6</span></button>
            <button class="menu-btn !min-w-0" data-palier="Hell">Hell <span class="text-sm block text-gray-400">Niv
                    4-7</span></button>
            <button class="menu-btn !min-w-0" data-palier="Void">Void <span class="text-sm block text-gray-400">Niv
                    7-8</span></button>
        </div>
        <button class="menu-btn back-btn" onclick="goToMenu()">
            Retour
        </button>
    </section>

    <!-- Écran 3: Sélection Nombre Questions -->
    <section id="question-count-screen" class="game-screen center-col">
        <!-- Orbitron -->
        <h2 id="question-count-title" class="font-game text-4xl text-white mb-8">Palier Normal</h2>
        <div class="selection-grid !grid-cols-1 !max-w-md">
            <button class="menu-btn !min-w-0" data-count="7">7 Questions</button>
            <button class="menu-btn !min-w-0" data-count="10">10 Questions</button>
            <button class="menu-btn !min-w-0" data-count="16">16 Questions</button>
        </div>
        <button class="menu-btn back-btn" onclick="goToPalierSelect()">
            Retour
        </button>
    </section>

    <!-- Écran 4: Sélection Entraînement -->
    <section id="training-select-screen" class="game-screen center-col">
        <!-- Orbitron -->
        <h2 class="font-game text-4xl text-white mb-8">Mode Entraînement</h2>
        <div class="selection-grid !grid-cols-2 md:!grid-cols-4 !max-w-4xl">
            <button data-level="1" class="menu-btn !min-w-0" style="border-color: #4ade80;">Niveau 1</button>
            <button data-level="2" class="menu-btn !min-w-0" style="border-color: #4ade80;">Niveau 2</button>
            <button data-level="3" class="menu-btn !min-w-0" style="border-color: #60a5fa;">Niveau 3</button>
            <button data-level="4" class="menu-btn !min-w-0" style="border-color: #60a5fa;">Niveau 4</button>
            <button data-level="5" class="menu-btn !min-w-0" style="border-color: #facc15;">Niveau 5</button>
            <button data-level="6" class="menu-btn !min-w-0" style="border-color: #facc15;">Niveau 6</button>
            <button data-level="7" class="menu-btn !min-w-0" style="border-color: #f87171;">Niveau 7</button>
            <button data-level="8" class="menu-btn !min-w-0" style="border-color: #f87171;">Niveau 8</button>
        </div>
        <button class="menu-btn back-btn" onclick="goToMenu()">
            Retour
        </button>
    </section>

    <!-- Écran 5: Le Jeu -->
    <section id="game-world" class="game-screen">

        <!-- 1. HUD (Haut) - Utilise .hud-label et .hud-value qui forcent Orbitron -->
        <header id="game-hud">
            <!-- Palier / Niveau -->
            <div class="hud-item">
                <span id="hud-level-label" class="hud-label">PALIER</span>
                <span id="hud-level-value" class="hud-value font-game">NORMAL</span>
            </div>
            <!-- Compteur Questions -->
            <div class="hud-item">
                <span id="hud-question-count" class="hud-value font-game">1/7</span>
            </div>
            <!-- Score -->
            <div class="hud-item">
                <span class="hud-label">SCORE</span>
                <span id="hud-score-value" class="hud-value font-game">0</span>
            </div>
            <!-- Vies -->
            <div class="hud-item">
                <span class="hud-label">VIES</span>
                <span id="hud-lives-value" class="hud-value text-2xl">❤️❤️❤️</span>
            </div>
            <!-- Timer -->
            <div class="hud-item">
                <span class="hud-label">TEMPS</span>
                <span id="hud-timer-value" class="hud-value font-game">30</span>
            </div>
        </header>

        <!-- 2. Arène (Milieu) -->
        <main id="game-arena">
            <div id="question-container">
                <!-- VT323 est appliqué via .font-arcade-text -->
                <div id="definition-content" class="font-arcade-text">
                    <!-- Contenu (définition ou expression) -->
                </div>
                <div id="expression-options-container" style="display: none;">
                    <!-- Boutons générés par JS (utiliseront Orbitron via .expression-btn) -->
                </div>
            </div>
        </main>

        <!-- 3. Saisie (Bas) -->
        <footer id="input-container">
            <!-- Boutons d'action : utilisent Orbitron via .action-btn -->
            <button id="joker-button" class="action-btn">
                <span>JOKER</span>
                <span id="joker-status" class="font-game text-xl text-amber-400">PRÊT</span>
            </button>

            <div id="word-input-area">
                <!-- Indice : utilise Orbitron via #hint-text -->
                <span id="hint-text"></span>
                <!-- VT323 est forcé via #answer-input -->
                <input type="text" id="answer-input" placeholder="Tapez la réponse...">
            </div>

            <div id="expression-input-area" style="display: none;">
                <!-- Les boutons sont dans l'arène -->
            </div>

            <div class="flex gap-4">
                <button id="hint-button" class="action-btn">
                    <span>INDICE</span>
                    <span class="font-game text-xl text-teal-400">?</span>
                </button>
                <button id="second-meaning-button" class="action-btn" style="display: none;">
                    <span>2e SENS</span>
                    <span class="font-game text-xl text-cyan-400">...</span>
                </button>
            </div>
        </footer>

        <!-- 4. Overlays (par dessus tout) -->
        <div id="result-box">
            <!-- Orbitron -->
            <h3 id="result-word" class="font-game"></h3>
            <!-- VT323 -->
            <p id="result-definition"></p>
        </div>
        <div id="feedback-overlay"></div>
        <div id="level-transition-overlay">
            <!-- Orbitron -->
            <h2 id="level-transition-text" class="font-game"></h2>
        </div>

    </section>

    <!-- Écran 6: Game Over -->
    <section id="game-over-screen" class="game-screen center-col gap-8"
        style="background: linear-gradient(135deg, #4b0000, #000000);">
        <!-- Orbitron -->
        <h2 class="font-game text-8xl text-red-500" style="text-shadow: 0 0 10px #f00, 0 0 20px #f00;">GAME OVER</h2>
        <div class="text-center">
            <!-- Orbitron -->
            <span class="text-2xl text-gray-400 block font-game">Score Final</span>
            <span id="final-score-display" class="font-game text-7xl text-white">0</span>
        </div>
        <div id="final-score-summary"
            class="text-left w-full max-w-2xl max-h-48 overflow-y-auto bg-gray-900 p-4 rounded-lg border border-gray-700">
            <!-- Orbitron pour le titre du bilan -->
            <h3 class="text-lg font-semibold text-white mb-2 font-game">Bilan des mots :</h3>
        </div>
        <!-- Orbitron via .menu-btn -->
        <button id="game-over-menu-btn" class="menu-btn">
            Menu Principal
        </button>
    </section>

    <!-- Écran 7: Victoire -->
    <section id="victory-screen" class="game-screen center-col gap-8"
        style="background: linear-gradient(135deg, #065f46, #047857);">
        <!-- Orbitron -->
        <h2 class="font-game text-8xl text-green-400" style="text-shadow: 0 0 10px #0f0, 0 0 20px #0f0;">VICTOIRE !</h2>
        <div class="text-center">
            <!-- Orbitron -->
            <span class="text-2xl text-gray-400 block font-game">Score Final</span>
            <span id="final-score-victory-display" class="font-game text-7xl text-white">0</span>
        </div>
        <div id="victory-score-summary"
            class="text-left w-full max-w-2xl max-h-48 overflow-y-auto bg-gray-900 p-4 rounded-lg border border-gray-700">
            <!-- Orbitron pour le titre du bilan -->
            <h3 class="text-lg font-semibold text-white mb-2 font-game">Bilan des mots :</h3>
        </div>
        <!-- Orbitron via .menu-btn -->
        <button id="victory-menu-btn" class="menu-btn">
            Menu Principal
        </button>
    </section>


    <!-- Logique du jeu -->
    <script type="module">
        // --- Base de données des mots ---
        const wordList = [
            { level: 1, word: "A", definitions: ["Première lettre de l'alphabet."] },
            { level: 1, word: "À", definitions: ["Préposition servant à indiquer le lieu, le temps, ou le but."] },
            { level: 1, word: "ABATTRE", definitions: ["Provoquer la chute ou la destruction (ou la mort) d'un être animé ou inanimé."] },
            { level: 1, word: "ABEILLE", definitions: ["Insecte hyménoptère, social et domestique, connu pour sa capacité à produire du miel et de la cire.", "(symbol.) Emblème associé à Napoléon Ier évoquant le pouvoir impérial.", "(milit.) Terme désuet employée durant la Première Guerre mondiale pour désigner une balle."] },










                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////
                                        ///////////             ///////////






                                                    

            // NIVEAU 2 (Facile)
            { level: 2, word: "ABANDON", definitions: ["Action de rompre le lien qui attachait une personne à une chose ou à une personne.", "(dr.) Action de renoncer à la possession d'un bien."] },
            { level: 2, word: "ABANDONNER", definitions: ["Rompre le lien qui attachait à une chose ou à une personne.","Renoncer à un pouvoir, à des droits, à la possession d'un bien ou à l'utilisation d'une chose."] },
            { level: 2, word: "ABANDONNÉ", definitions: ["Ne plus être habité, être laissé à l'abandon, sans soin."] },
            { level: 2, word: "ABAISSABLE", definitions: ["Qui peut être abaissé."] },
            { level: 2, word: "ABAISSER", definitions: ["Faire descendre (une chose) à un niveau inférieur (considéré comme un terme provisoire ou définitif)."] },
            { level: 2, word: "ABAT-JOUR", definitions: ["Dispositif destiné à rabattre la lumière d'une lampe."] },
            { level: 2, word: "ABATTANT", definitions: ["Tablette que l'on peut abaisser."," Objet qui peut se rabattre."] },
            { level: 2, word: "ABATTOIR", definitions: ["Établissement d'abattage des animaux destinés à la consommation."] },
            { level: 2, word: "ABATTU", definitions: ["Abaissé, affaissé.","(masc.) Position abattue du chien de fusil.", "(archit.) La retombée d'une voûte (vieilli)."] },
            { level: 2, word: "ABBAYE", definitions: ["(relig.) Monastère placé sous la direction d'un abbé ou d'une abesse."] },
            { level: 2, word: "ABBÉ", definitions: ["Moine supérieur d’une abbaye"] },
            { level: 2, word: "ABBESSE", definitions: ["Sœur supérieure d’un monastère de femmes."] },
            { level: 2, word: "ABC", definitions: ["Premières lettres de l'alphabet, symboles de l'alphabet complet.", "Petit livre destiné à apprendre la lecture aux enfants à partir des lettres de l'alphabet.", "Premiers rudiments d'une pratique, d'un art. d'une technique, d'une science, et en général de toute activité qui s'apprend et comporte des degrés dans l'apprentissage."] },
            { level: 2, word: "ABDOMEN", definitions: ["(anat.) Cavité viscérale formant la partie inférieure du tronc de l'homme.", "(zool.) Partie postérieure du corps de certains invertébrés (arthropodes)."] },
            { level: 2, word: "ABDOMINAL", definitions: ["(anat.) Qui se rapporte à l'abdomen."] },
            { level: 2, word: "ABÎME", definitions: ["Gouffre profond, immense.", "(Figuré) État de perdition, malheur profond.", "(Théologie) Lieu des enfers."] },
            { level: 2, word: "ABÎMER", definitions: ["Plonger dans un abîme.", "Détériorer, endommager gravement.", "(Pronominal, fig.) Se plonger dans une méditation profonde."] },
            { level: 2, word: "ABÎMÉ", definitions: ["Qui est jeté, plongé dans un abîme.","Qui est détérioré, en mauvais état ; qui a subi des dommages."] },
            { level: 2, word: "ABONDANCE", definitions: ["Ce qui est disponible en très grande quantité (ressources, richesses, choses nécessaires ou utiles à la vie, etc.)."] },
            { level: 2, word: "ABONDANT", definitions: ["Qui est disponible ou qui produit en grande quantité."] },
            { level: 2, word: "ABONNEMENT", definitions: ["Fait de passer une convention assurant le bénéfice régulier d'un service ou d'un produit moyennant un prix global inférieur à la somme des prix au détail."] },
            { level: 2, word: "ABONNÉ", definitions: ["Passer une convention (pour autrui ou pour soi) avec un organisme public ou privé pour bénéficier régulièrement de ses services ou de ses produits notamment culturels (journaux, périodiques, spectacles, concerts, conférences) ou techniques (téléphone, chemin de fer, entretien de machines, etc.) moyennant un prix global inférieur à la somme des prix au détail."] },
            { level: 2, word: "ABORD", definitions: ["Action d'arriver, d'accoster ; accès.","(Fig.) Manière d'approcher quelqu'un. D'abord : d'entrée de jeu."] },
            { level: 2, word: "ABRI", definitions: ["Lieu où on peut se mettre à couvert, se protéger des intempéries ou d'un danger."] },
            { level: 2, word: "ABRICOT", definitions: ["Fruit de l'abricotier, à chair orangée et veloutée."] },
            { level: 2, word: "ABSENCE", definitions: ["Inexistence.", "Manque, privation."] },
            { level: 2, word: "ABSENT", definitions: ["Qui n'est pas présent.", "Fait d’être absent, éloignement géographique et temporel."] },
            { level: 2, word: "ABSOLU", definitions: ["Complet ; sans restriction.", "Qui est souverain, sans contrôle, en parlant d’une autorité, d’un État."] },
            { level: 2, word: "ABSOLUMENT", definitions: ["D'une manière absolue ; entièrement, totalement.", "Sans aucune restriction (souvent utilisé pour renforcer une affirmation)."] },
            { level: 2, word: "ABSURDE", definitions: ["(Adj.) Contraire à la raison, déraisonnable.", "(Subst.) Caractère de ce qui est absurde, dénué de sens."] },
            { level: 2, word: "ABUS", definitions: ["Usage excessif ou mauvais d'une chose.", "Excès, faute commise par l'excès de pouvoir."] },


















            
            // NIVEAU 3 (Moyen)
            { level: 3, word: "ABAISSANT", definitions: ["Qui abaisse, humilie ; humiliant."] },
            { level: 3, word: "ABAISSE-LANGUE", definitions: ["(méd.) Palette avec laquelle on abaisse la langue, afin d'examiner l'intérieur de la bouche et de la gorge."] },
            { level: 3, word: "ABAISSEMENT", definitions: ["Action d'abaisser ou de s'abaisser; état de ce qui est abaissé.", "(géol.) Région plus basse dans la charnière d'un pli."] },
            { level: 3, word: "ABASOURDIR", definitions: ["Étourdir et comme assourdir par un grand bruit.", "Provoquer chez quelqu'un un sentiment voisin de la stupeur."] },
            { level: 3, word: "ABASOURDISSANT", definitions: ["Étourdir et comme assourdir par un grand bruit.", "Provoquer chez quelqu'un un sentiment voisin de la stupeur."] },
            { level: 3, word: "ABASOURDISSEMENT", definitions: ["État d'une personne étourdie à l'extrême par un grand bruit.", "État psychologique voisin de la stupeur."] },
            { level: 3, word: "ABAT", definitions: ["Action de s'abattre, chute.", "(bouch.) (plur.) Parties accessoires non nobles d'animaux tués pour la consommation."] },
            { level: 3, word: "ABATTAGE", definitions: ["Action de faire tomber (généralement un objet faisant partie d'une construction, des arbres, plus rarement un animal); action d'abattre pour tuer (un animal notamment de bouch.)."] },
            { level: 3, word: "ABATTEMENT", definitions: ["Action d'abattre; résultat de l'action d'abattre. ","(dr.) Retranchement, réduction (d'une somme d'argent)."] },
            { level: 3, word: "ABATTEUR", definitions: ["Celui qui abat."] },
            { level: 3, word: "ABAT-VENT", definitions: ["Dispositif destiné à protéger des intempéries les fenêtres, cheminées, plantations horticoles."] },
            { level: 3, word: "ABCÈS", definitions: ["(méd.) Amas de pus dans une cavité naturelle ou accidentelle du corps."] },
            { level: 3, word: "ABDICATION", definitions: ["(dr.) Renonciation à de hautes fonctions, à l'autorité souveraine.","(fig.) Action de renoncer à une valeur ou à un sentiment considérés comme étant de grand prix."] },
            { level: 3, word: "ABDIQUER", definitions: ["(dr.) Renoncer, de plein gré ou non, à de hautes fonctions, à l'autorité souveraine."] },
            { level: 3, word: "ABERRANT", definitions: ["(philos.) Qui s'écarte de la norme attendue, qui va contre la logique ou la vérité."] },
            { level: 3, word: "ABERRATION", definitions: ["Déviation, écart par rapport à la norme attendue.", "(astron.) Déplacement apparent des astres dû à la combinaison des mouvements terrestres et lumineux."] },
            { level: 3, word: "ABJECT", definitions: ["Qui inspire le mépris et le dégoût ; ignoble, méprisable."] },
            { level: 3, word: "ABJECTION", definitions: ["Caractère abject ; action méprisable, bassesse morale."] },
            { level: 3, word: "ABLUTION", definitions: ["Action de se laver, purification rituelle par l'eau."] },
            { level: 3, word: "ABNÉGATION", definitions: ["Sacrifice volontaire de soi-même, de ses intérêts ou de ses passions ; dévouement total."] },
            { level: 3, word: "ABOI", definitions: ["Cri du chien.", "(Figuré) Être aux abois : être à la dernière extrémité, acculé."] },
            { level: 3, word: "ABOIEMENT", definitions: ["Action d'aboyer ; cri du chien."] },
            { level: 3, word: "ABOLIR", definitions: ["Anéantir, supprimer (une loi, une institution, un usage)."] },
            { level: 3, word: "ABOLITION", definitions: ["Action d'abolir ; suppression définitive (d'une loi, d'une peine)."] },
            { level: 3, word: "ABOMINABLE", definitions: ["Qui inspire l'aversion, l'horreur ; détestable, exécrable."] },
            { level: 3, word: "ABOMINATION", definitions: ["Sentiment d'horreur extrême ; chose qui inspire ce sentiment."] },
            { level: 3, word: "ABONDAMMENT", definitions: ["En grande quantité, avec abondance."] },
            { level: 3, word: "ABONDER", definitions: ["Être en abondance, exister en grand nombre.", "Abonder dans le sens de quelqu'un : être entièrement d'accord."] },
            { level: 3, word: "ABONNER", definitions: ["Souscrire un abonnement pour quelqu'un ; (Pronom.) Souscrire un abonnement."] },
            { level: 3, word: "ABORDABLE", definitions: ["Auquel on peut accéder, atteignable. (Fig.) Facile à approcher, dont le prix est raisonnable."] },
            { level: 3, word: "ABORDAGE", definitions: ["Collision entre navires (voitures, ou avions).", "(Hist.) Action d'assaillir un navire pour le prendre d'assaut."] },
            { level: 3, word: "ABORDER", definitions: ["Arriver à un lieu, accoster.", "Entamer un sujet.", "Interpeller quelqu'un."] },
            { level: 3, word: "ABOUTIR", definitions: ["Arriver à un résultat, atteindre son but.", "Avoir pour terminaison, se terminer à un endroit."] },
            { level: 3, word: "ABOUTISSEMENT", definitions: ["Résultat final, achèvement d'un processus."] },
            { level: 3, word: "ABOYER", definitions: ["Pousser le cri propre au chien."] },
            { level: 3, word: "ABRÉGER", definitions: ["Raccourcir, condenser, réduire la durée ou la longueur."] },
            { level: 3, word: "ABRÉGÉ", definitions: ["(Part. passé) Raccourci.", "(Adj.) Condensé.", "(Loc. adv.) En abrégé : brièvement.", "(Subst.) Résumé, petit traité condensé."] },
            { level: 3, word: "ABREUVER", definitions: ["Faire boire.", "(Fig.) Remplir, saturer (de larmes, d'injures, de connaissances)."] },
            { level: 3, word: "ABREUVOIR", definitions: ["Bassin ou auge où l'on fait boire les animaux."] },
            { level: 3, word: "ABRÉVIATION", definitions: ["Action d'abréger ; forme abrégée d'un mot ou d'une expression."] },
            { level: 3, word: "ABRICOTIER", definitions: ["Arbre fruitier qui produit l'abricot."] },
            { level: 3, word: "ABRITER", definitions: ["Mettre à l'abri, protéger."] },
            { level: 3, word: "ABRITÉ", definitions: ["(Part. passé et adj.) Mis à l'abri, protégé."] },
            { level: 3, word: "ABRUPT", definitions: ["(Adj.) Qui présente une forte pente, un escarpement. (Subst.) Pente très raide."] },
            { level: 3, word: "ABRUTIR", definitions: ["Rendre stupide, priver de l'intelligence et du sens moral."] },
            { level: 3, word: "ABRUTI", definitions: ["(Part. passé) Rendu stupide.", "(Adj. et Subst.) Personne stupide, privée de raisonnement."] },
            { level: 3, word: "ABRUTISSANT", definitions: ["Qui abrutit, qui rend stupide ou hébété."] },
            { level: 3, word: "S'ABSENTER", definitions: ["Quitter un lieu, se rendre absent."] },
            { level: 3, word: "ABSOLUTION", definitions: ["Remise des péchés par un prêtre.", "Action de décharger de toute faute, de déclarer non coupable."] },
            { level: 3, word: "ABSORBANT", definitions: ["(Adj.) Qui absorbe, qui a la propriété d'absorber.", "(Fig.) Captivant, très intéressant.", "(Subst.) Substance qui absorbe."] },
            { level: 3, word: "ABSORBER", definitions: ["Imprégner, faire pénétrer un liquide.", "Prendre toute l'attention, accaparer."] },
            { level: 3, word: "ABSORBÉ", definitions: ["(Part. passé) Qui a été absorbé.", "(Adj.) Concentré dans ses pensées, accaparé."] },
            { level: 3, word: "ABSOUDRE", definitions: ["Pardonner, déclarer non coupable."] },
            { level: 3, word: "S'ABSTENIR", definitions: ["S'empêcher de faire quelque chose."] },
            { level: 3, word: "ABSTENTION", definitions: ["Action de s'abstenir, de ne pas agir ou voter."] },
            { level: 3, word: "ABSTINENCE", definitions: ["Privation volontaire de nourriture, de boisson, ou de plaisir."] },
            { level: 3, word: "ABSTRACTION", definitions: ["Action d'isoler mentalement une qualité ou un être de sa réalité concrète.", "Fait d'être absorbé dans ses pensées."] },
            { level: 3, word: "ABSTRAIT", definitions: ["(Part. passé) Abstrait.", "(Adj.) Qui résulte d'une abstraction ; difficile à comprendre.", "(Subst.) Ce qui est de l'ordre de l'abstraction."] },
            { level: 3, word: "ABSURDITÉ", definitions: ["Caractère de ce qui est absurde ; chose absurde."] },
            { level: 3, word: "ABUSER", definitions: ["User de quelque chose de façon excessive.", "Tromper, induire en erreur."] },
            { level: 3, word: "ABUSEUR", definitions: ["Personne qui abuse de la confiance d'autrui, qui trompe."] },
            { level: 3, word: "ABUSIF", definitions: ["Qui constitue un abus, qui est contraire à la justice ou à la raison."] },
            { level: 3, word: "ACADÉMIE", definitions: ["Société savante ou littéraire.", "École supérieure d'art ou de lettres.", "Circonspection scolaire, institution d'enseignement."] },
            { level: 3, word: "ACADÉMIQUE", definitions: ["Relatif à l'académie, à l'enseignement.", "(Péjoratif) Manquant d'originalité, trop classique."] },



















            // NIVEAU 4 (Assez Difficile)
            { level: 4, word: "ABAJOUE", definitions: ["Chez certains animaux, poche située de chaque côté de la cavité buccale."] },
            { level: 4, word: "À-BAS", definitions: ["(techn.) Ensemble des chantiers d'exploitation et des voies de circulation qui se trouvent au fond d'une ardoisière.", "(dial.) Nom donné, dans le pays de la Loire, à l'ouest; ou encore à l'aval (du fleuve); s'oppose dans ce cas à amont."] },
            { level: 4, word: "ABANDONNEMENT", definitions: ["Action d'abandonner une personne, ou parfois des choses concernant une personne.", "État d'une personne abandonnée."] },
            { level: 4, word: "ABANDONNEUR", definitions: ["Celui qui abandonne, qui a l'habitude d'abandonner."] },
            { level: 4, word: "ABATTABLE", definitions: ["Qui peut être abattu."] },
            { level: 4, word: "ABATTIS", definitions: ["Action d'abattre; ce qui est abattu.", "(milit.) Obstacle artificiel formé d'arbres abattus."] },
            { level: 4, word: "ABEILLER", definitions: ["(adj.) Qui concerne, se rapporte ou appartient aux abeilles.", "(masc.) (vieilli) Lieu destiné à l'élevage des abeilles, équipé de ruches."] },
            { level: 4, word: "ABÊTIFIER", definitions: ["Rendre stupide ou idiot."] },
            { level: 4, word: "ABÊTIR", definitions: ["Rendre quelqu'un moins intelligent ou le priver de sa capacité de réflexion.", "(intransitif) Perdre ses facultés intellectuelles."] },
            { level: 4, word: "ABÊTISSANT", definitions: ["Qui a pour effet de rendre stupide ou d'abaisser les capacités intellectuelles."] },
            { level: 4, word: "ABÊTISSEMENT", definitions: ["Processus par lequel un individu devient moins réceptif ou intelligent, perdant en facultés mentales.", "Condition d'un individu ayant subi une diminution de ses capacités intellectuelles."] },
            { level: 4, word: "ABHORRABLE", definitions: ["Digne d'être fortement détesté ou haï."] },
            { level: 4, word: "ABHORRER", definitions: ["Éprouver une répulsion profonde et durable; détester intensément."] },
            { level: 4, word: "ABHORRÉ", definitions: ["Qui est détesté, tenu en horreur."] },
            { level: 4, word: "AB INTESTAT", definitions: ["(Loc. lat.) Sans avoir fait de testament ; par conséquent, dont la succession est réglée selon la loi."] },
            { level: 4, word: "ABJECTEMENT", definitions: ["D'une manière abjecte, avec bassesse."] },
            { level: 4, word: "ABJURATION", definitions: ["Acte par lequel on renonce solennellement à une religion, à une doctrine."] },
            { level: 4, word: "ABJURER", definitions: ["Renoncer solennellement à une religion, à une doctrine.", "(Figuré) Renoncer à une idée, une habitude."] },
            { level: 4, word: "ABLATIF", definitions: ["Cas grammatical exprimant la séparation, l'origine, l'instrument ou le moyen (Grammaire latine)."] },
            { level: 4, word: "ABLATION", definitions: ["Action d'enlever une partie du corps, un organe ou un tissu (Chirurgie).", "Action d'emporter ou de retirer (général)."] },
            { level: 4, word: "ABLE", definitions: ["Petit poisson d'eau douce aux écailles très brillantes, utilisé autrefois pour faire des perles d'imitation (Cyprinidé)."] },
            { level: 4, word: "ABOMINABLEMENT", definitions: ["D'une manière abominable, odieuse."] },
            { level: 4, word: "ABOMINER", definitions: ["Avoir en abomination, détester vivement."] },
            { level: 4, word: "ABONNIR", definitions: ["Rendre meilleur, améliorer (un produit, un caractère)."] },
            { level: 4, word: "ABORIGÈNE", definitions: ["(Adj. et Subst.) Qui est originaire du pays où il vit ; indigène."] },
            { level: 4, word: "ABORNÉ", definitions: ["Limité par des bornes. (Fig.) Qui a l'esprit étroit, peu ouvert."] },
            { level: 4, word: "ABOUTI", definitions: ["Qui a réussi, achevé.", "Qui a atteint son plein développement."] },
            { level: 4, word: "ABOYANT", definitions: ["(Part. prés.) Qui aboie.", "(Adj.) Qui aboie souvent.", "(Subst.) Animal qui aboie."] },
            { level: 4, word: "ABOYEUR", definitions: ["(Subst.) Personne qui crie, qui vocifère.", "(Figuré) Celui qui fatigue par des criailleries importunes, par des injures"] },
            { level: 4, word: "ABRACADABRANT", definitions: ["Étrange et compliqué, jusqu'à l'incohérence ou au délire; totalement incompréhensible"] },
            { level: 4, word: "ABROGATION", definitions: ["Action d'abroger ; annulation d'une loi ou d'un acte officiel."] },
            { level: 4, word: "ABROGER", definitions: ["Annuler (une loi, un décret, une coutume) par une autorité compétente."] },
            { level: 4, word: "ABRUTISSEMENT", definitions: ["Action d'abrutir ; état de la personne abrutie."] },
            { level: 4, word: "ABSCISSE", definitions: ["Coordonnée horizontale d'un point dans un système de coordonnées cartésiennes."] },
            { level: 4, word: "ABSENTÉISME", definitions: ["Abstention volontaire ou habitude de s'absenter de son travail ou de son devoir."] },
            { level: 4, word: "ABSINTHE", definitions: ["Plante amère utilisée en liqueur.", "Liqueur alcoolisée et amère, dont la consommation excessive est dangereuse."] },
            { level: 4, word: "ABSOLUTISME", definitions: ["Système de gouvernement où le pouvoir est illimité et sans contrôle."] },
            { level: 4, word: "ABSOLUTISTE", definitions: ["(Adj. et Subst.) Partisan de l'absolutisme."] },
            { level: 4, word: "ABSORPTION", definitions: ["Action d'absorber ; fait d'être absorbé."] },
            { level: 4, word: "ABSTENTIONNISTE", definitions: ["(Subst. et Adj.) Qui pratique l'abstention."] },
            { level: 4, word: "ABSTINENT", definitions: ["(Subst. et Adj.) Qui pratique l'abstinence."] },
            { level: 4, word: "ABSTRAIRE", definitions: ["Isoler par la pensée (une qualité, une idée) de l'objet auquel elle est liée."] },
            { level: 4, word: "ABSTRUS", definitions: ["Difficile à comprendre, obscur (synonyme d'abscons)."] },
            { level: 4, word: "ABSURDEMENT", definitions: ["D'une manière absurde."] },
            { level: 4, word: "ABUSANT", definitions: ["(Part. prés.) Qui abuse.", "(Adj.) Qui induit en erreur."] },
            { level: 4, word: "ABUSIVEMENT", definitions: ["D'une manière abusive."] },
            { level: 4, word: "ACACIA", definitions: ["Arbre des régions chaudes, parfois épineux, aux fleurs jaunes."] },
            { level: 4, word: "ACADÉMICIEN", definitions: ["Membre d'une académie, notamment l'Académie française."] },
            { level: 4, word: "ACAJOU", definitions: ["Bois rouge, dur et précieux, utilisé en ébénisterie."] },
























            // NIVEAU 5 (Difficile)
            { level: 5, word: "ABA", definitions: ["Manteau de laine grossier et sans manches, porté par les Bédouins."] },
            { level: 5, word: "ABACA", definitions: ["Bananier des Philippines qui fournit une matière textile.", "Matière textile fournie par l'arbre, appelée aussi chanvre de Manille ou tagal."] },
            { level: 5, word: "ABADIE", definitions: ["(Arg.) Grand rassemblement de badauds, foule, multitude."] },
            { level: 5, word: "ABAISSE", definitions: ["(Pâtiss.) Pâte amincie au rouleau."] },
            { level: 5, word: "ABALONE", definitions: ["(zool.) (gastron.) Mollusque gastéropode univalve du genre haliotis, ou crustacé du genre auris marina."] },
            { level: 5, word: "ABALOURDIR", definitions: ["Rendre balourd, gauche, stupide."] },
            { level: 5, word: "ABANDONNÉMENT", definitions: ["D'une manière abandonnée, sans retenue, avec naturel."] },
            { level: 5, word: "ABÂTARDIR", definitions: ["Rendre bâtard, altérer, en faisant perdre les qualités et la vigueur originelle inhérentes (à une race, un groupe social, une personne, une œuvre...)."] },
            { level: 5, word: "ABÂTARDI", definitions: ["Rendu bâtard, qui a perdu sa pureté et sa vigueur originelles.", "(bot.) Privé de ses qualités originelles par une hybridation incontrôlée."] },
            { level: 5, word: "ABAT-SON", definitions: ["Ensemble de lames insérées dans les baies d'un clocher pour rabattre le son vers le sol."] },
            { level: 5, word: "ABATTÉE", definitions: ["(mar.) Mouvement de la proue d'un navire dont la ligne s'éloigne du lit (ou direction) du vent.", "(aviat.) Chute en piqué à la suite d'une perte de vitesse qui rompt l'équilibre horizontal de l'avion."] },
            { level: 5, word: "ABATTURE", definitions: ["(arboric.) (sylvic.) Action d'abattre (des fruits, des glands); état de ce qui est abattu.","(chasse.) (plur.) Traces que laisse le passage d'un cerf ou d'un cervidé brisant ou courbant (abattant) du bas de son ventre les broussailles, fougères, etc., de la forêt, et qui permettent notamment de connaître la hauteur sur jambe de la bête."] },
            { level: 5, word: "ABAC", definitions: ["Tableau à calculer (calcul ancien) "," partie supérieure d'un chapiteau (Architecture)."] },
            { level: 5, word: "ABBATIAL", definitions: ["Qui appartient à l'abbaye en tant que communauté religieuse."] },
            { level: 5, word: "ABBEVILLOIS", definitions: ["Habitant d'Abbeville ; relatif à cette ville."] },
            { level: 5, word: "ABDICATAIRE", definitions: ["Qui a abdiqué."] },
            { level: 5, word: "ABDUCTEUR", definitions: ["(anat.) Qui produit ou permet le mouvement de l'abduction." , "(industr.) (chim.) Tube à l'aide duquel on recueille les gaz dans une réaction chim."] },
            { level: 5, word: "ABDUCTION", definitions: ["(anat.) Mouvement qui écarte un membre ou un segment de membre de la ligne moyenne du corps.", "(psycho-physiol.) Mouvement d'un organe des sens vers le dehors."] },
            { level: 5, word: "ABÉCÉDAIRE", definitions: ["Alphabétique.", "Qui en est à l'A.B.C. quant au niveau des connaissances.", "(poés.) Poème dont les initiales des vers suivent la séquence alphabétique."] },
            { level: 5, word: "ABEILLÉ", definitions: ["Qui est orné de motifs d'abeilles (Héraldique)."] },
            { level: 5, word: "ABEILLÈRE", definitions: ["Qui a trait aux abeilles ou à l'apiculture."] },
            { level: 5, word: "ABEILLON", definitions: ["Ancien terme désignant un groupe d'abeilles en vol."] },
            { level: 5, word: "ABERRANCE", definitions: ["(statist.) Caractère d'une grandeur qui dans une série d'observations s'écarte nettement de la valeur moyenne."] },
            { level: 5, word: "ABERRER", definitions: ["(rare.) Dévier du chemin ou s'écarter de la norme; se tromper ou être dans l'erreur."] },
            { level: 5, word: "ABÊTISSOIR", definitions: ["Lieu où l'on devient stupide ou abruti."] },
            { level: 5, word: "ABÎMEMENT", definitions: ["Action de s'abîmer, de se dégrader, de se détériorer (vieilli ou littéraire)."] },
            { level: 5, word: "AB IRATO", definitions: ["(Loc. lat.) Sous l'effet de la colère, de façon irréfléchie."] },
            { level: 5, word: "ABJURATEUR", definitions: ["Qui abjure, qui fait une abjuration."] },
            { level: 5, word: "ABJURATOIRE", definitions: ["Qui contient une abjuration ou qui y est relatif."] },
            { level: 5, word: "ABLETTE", definitions: ["Petit poisson d'eau douce aux écailles argentées (synonyme d'able)."] },
            { level: 5, word: "ABLUTIONNER", definitions: ["Soumettre à une ablution, laver rituellement."] },
            { level: 5, word: "ABOLISSABLE", definitions: ["Qui peut être aboli, supprimé."] },
            { level: 5, word: "ABOLITIONNISME", definitions: ["Doctrine qui préconise l'abolition de certaines lois ou institutions (notamment l'esclavage ou la peine de mort)."] },
            { level: 5, word: "ABOLITIONNISTE", definitions: ["(Subst. et adj.) Partisan de l'abolitionnisme."] },
            { level: 5, word: "ABONNATAIRE", definitions: ["Personne qui bénéficie d'un abonnement ou d'une rente."] },
            { level: 5, word: "ABONNI", definitions: ["(Part. passé et adj.) Qui a été rendu meilleur, amélioré."] },
            { level: 5, word: "ABORDÉ", definitions: ["Personne interpellée, à qui on a parlé."] },
            { level: 5, word: "ABORNER", definitions: ["Délimiter un terrain par des bornes."] },
            { level: 5, word: "ABORTIF", definitions: ["Qui provoque l'avortement.", "(Fig.) Qui n'a pas abouti, qui a avorté."] },
            { level: 5, word: "ABOTER", definitions: ["Faire aboutir, en venir à bout","Mettre un abot à un animal."] },
            { level: 5, word: "ABOUCHEMENT", definitions: ["Action d'aboucher ; jonction de deux conduits (Anatomie, Hydraulique).", "Entrevue, rencontre pour une discussion."] },
            { level: 5, word: "ABOUCHER", definitions: ["Mettre deux conduits bout à bout pour les joindre.", "(Pronom.) Se rencontrer, s'entretenir."] },
            { level: 5, word: "ABOULER", definitions: ["(Familier) Apporter, faire venir."] },
            { level: 5, word: "ABRASIF", definitions: ["(Adj.) Qui a la propriété d'user par frottement.", "(Subst.) Matière utilisée pour polir, meuler, ou frotter."] },
            { level: 5, word: "ABRASION", definitions: ["Usure par frottement.", "Érosion de la surface de la peau ou d'un matériau."] },
            { level: 5, word: "ABRÉGEABLE", definitions: ["Qui peut être abrégé, raccourci."] },
            { level: 5, word: "ABRÉVIATEUR", definitions: ["(Adj.) Qui abrège.", "(Subst.) Personne qui abrège un écrit."] },
            { level: 5, word: "ABRÉVIATIF", definitions: ["(Adj.) Qui sert à abréger.", "(Subst.) Signe abréviatif."] },
            { level: 5, word: "ABRÉVIÉ", definitions: ["(Part. passé et adj.) Raccourci, rendu bref."] },
            { level: 5, word: "ABRICOTER", definitions: ["Donner une couleur d'abricot, glacer (Cuisine)."] },
            { level: 5, word: "ABRICOTÉ", definitions: ["(Adj.) Qui a la couleur de l'abricot.", "(Subst.) Couleur abricot."] },
            { level: 5, word: "ABRITANT", definitions: ["Qui met à l'abri, qui protège."] },
            { level: 5, word: "ABRI-VENT", definitions: ["Construction destinée à protéger du vent."] },
            { level: 5, word: "ABROGEABLE", definitions: ["Qui peut être abrogé."] },
            { level: 5, word: "ABRUPTEMENT", definitions: ["D'une manière abrupte, brusquement."] },
            { level: 5, word: "ABRUTISSEUR", definitions: ["(Adj.) Qui contribue à l'abrutissement.", "(Subst.) Celui qui abrutit."] },
            { level: 5, word: "ABSCONS", definitions: ["(Adj.) Difficile à comprendre, obscur, abstrus.", "(Subst.) Ce qui est abscons."] },
            { level: 5, word: "ABSENTÉISTE", definitions: ["(Adj. et Subst.) Qui pratique l'absentéisme."] },
            { level: 5, word: "ABSIDE", definitions: ["Extrémité semi-circulaire ou polygonale d'une église, derrière le chœur."] },
            { level: 5, word: "ABSINTHEUR", definitions: ["Personne qui boit de l'absinthe (surtout la liqueur)."] },
            { level: 5, word: "ABSOLUTEUR", definitions: ["(Adj. et Subst.) Qui a le pouvoir de donner l'absolution."] },
            { level: 5, word: "ABSOLUTIF", definitions: ["(Adj.) Qui a le caractère d'une absolution.", "(Subst.) Formule d'absolution."] },
            { level: 5, word: "ABSOLUTOIRE", definitions: ["Qui donne l'absolution, qui absout."] },
            { level: 5, word: "ABSOLVANT", definitions: ["Qui absout, qui décharge de toute faute."] },
            { level: 5, word: "ABSORBABLE", definitions: ["Qui peut être absorbé."] },
            { level: 5, word: "ABSORBEMENT", definitions: ["Action d'absorber ou état d'être absorbé ; concentration mentale."] },
            { level: 5, word: "ABSTÈME", definitions: ["Qui s'abstient de boire des boissons alcoolisées."] },
            { level: 5, word: "ABSTENTIONNISME", definitions: ["Doctrine prônant l'abstention (politique, électorale)."] },
            { level: 5, word: "ABSTRAITEMENT", definitions: ["D'une manière abstraite, sans lien avec la réalité."] },
            { level: 5, word: "ABSTRAYANT", definitions: ["Qui abstrait."] },
            { level: 5, word: "ABUTER", definitions: ["(Chasse) Pousser le gibier vers un endroit.", "(Sport) Rejoindre le but."] },
            { level: 5, word: "ABYSSAL", definitions: ["Relatif aux abysses, aux grands fonds marins."] },
            { level: 5, word: "ABYSSE", definitions: ["Profondeur insondable des mers ; gouffre.", "(Fig.) Ce qui est immense, impénétrable."] },
            { level: 5, word: "ACABIT", definitions: ["Nature, qualité particulière (souvent en parlant des fruits, du vin)."] },
            { level: 5, word: "ACADÉMIQUEMENT", definitions: ["Selon les règles de l'académisme, de manière scolaire."] },
            { level: 5, word: "ACADÉMISME", definitions: ["Respect excessif des règles de l'art établies par les académies."] },
            { level: 5, word: "ACADIEN", definitions: ["Relatif à l'Acadie (ancienne colonie française d'Amérique du Nord) ou à ses habitants."] },

























            // NIVEAU 6 (Très Difficile)
            { level: 6, word: "AALÉNIEN", definitions: ["(Géol.) Étage le plus ancien du Jurassique moyen, s'étendant de 174 Ma à 170 Ma environ.", "Dér. du nom de la ville d'Aalen, en Bade-Wurtemberg."] },
            { level: 6, word: "S'ABADER", definitions: ["(Terme des campagnards) Prendre son essor, courir les champs, s'affranchir de toute entrave, se sauver."] },
            { level: 6, word: "ABAISSEUR", definitions: ["(Anat.) (Se dit d'un) muscle dont la fonction est d'abaisser l'organe sur lequel il est fixé.","(chir.) même sens que abaisse-langue."] },
            { level: 6, word: "ABALOURDISSEMENT", definitions: ["Action d'abalourdir; résultat de cette action."] },
            { level: 6, word: "ABAQUE", definitions: ["(arithm.) Tablette à calculer, bouclier.", "(Archit.) Partie supérieure du chapiteau des colonnes."] },
            { level: 6, word: "ABÂTARDISSEMENT", definitions: ["Action de rendre progressivement bâtard. Résultat de cette action.", "Altération portant atteinte à la vigueur originelle (des esprits, du courage, d'une nation, etc.)."] },
            { level: 6, word: "ABAT-FAIM", definitions: ["(culinaire.) (fam.) Plat de résistance servi au commencement d'un repas."] },
            { level: 6, word: "ABAT-FOIN", definitions: ["Trappe permettant de faire tomber directement le foin du grenier dans une étable ou une écurie."] },
            { level: 6, word: "ABAT-VOIX", definitions: ["(archit.) Dais placé au-dessus d'une chaire d'église et facilitant l'audition du prédicateur."] },
            { level: 6, word: "ABBATIAT", definitions: ["Dignité, fonction d'abbé d'un monastère (Littré); temps d'exercice de cette fonction."] },
            { level: 6, word: "ABDÉRITAIN", definitions: ["(Qui est) originaire d'Abdère ou y habite."] },
            { level: 6, word: "ABDOMINIEN", definitions: ["Relatif à l'abdomen.", "(Vieilli) Se dit d'un poisson dont les nageoires ventrales sont situées sous l'abdomen."] },
            { level: 6, word: "ABECQUEMENT", definitions: ["(fauconn.) Action de donner la becquée, c.-à-d. d'abéquer, d'abécher."] },
            { level: 6, word: "ABECQUER", definitions: ["Donner la becquée à un oiseau trop jeune pour prendre lui-même sa nourriture.", "(fig.) Fournir des aliments, matériels ou spirituels, à quelqu'un qui les reçoit passivement."] },
            { level: 6, word: "ABEILLAGE", definitions: ["(dr.) Taxe de l'Ancien Régime appliquée à la culture apicole."] },
            { level: 6, word: "ABER", definitions: ["(mar.) (géogr.) (Basse-Bretagne) Estuaire d'une petite rivière en forme de crique ou d'anse et servant de lieu de relâche pour les bateaux de pêche y échouant."] },
            { level: 6, word: "AB HOC ET AB HAC", definitions: ["(loc.) (adv.) (lat.) Confusément, à tort et à travers."] },
            { level: 6, word: "ABIES", definitions: ["Genre d'arbres conifères de la famille des Pinacées, comprenant notamment les sapins."] },
            { level: 6, word: "ABIGAÏL", definitions: ["Servante, dame de compagnie (terme vieilli)."] },
            { level: 6, word: "ABLATIVO", definitions: ["(Musique, vieilli) Synonyme d'ablatif (en opposition à 'nominativo')."] },
            { level: 6, word: "ABLUANT", definitions: ["(Adj.) Qui sert à laver, à nettoyer.", "(Subst.) Substance nettoyante ou dépurative (Pharmacie)."] },
            { level: 6, word: "ABOLITIF", definitions: ["Qui tend à abolir, qui a pour effet d'abolir."] },
            { level: 6, word: "ABONNABLE", definitions: ["Qui peut faire l'objet d'un abonnement."] },
            { level: 6, word: "ABONNAGE", definitions: ["Action de s'abonner, de prendre un abonnement."] },
            { level: 6, word: "ABORDEUR", definitions: ["Qui aborde ou qui est destiné à l'abordage."] },
            { level: 6, word: "ABORNEMENT", definitions: ["Action d'aborner.","Bornage en tant que matériellement exécuté entre deux propriétés contiguës."] },
            { level: 6, word: "ABORTION", definitions: ["Avortement provoqué ou fausse couche (terme médical)."] },
            { level: 6, word: "ABOTÉ", definitions: ["Mal ajusté"] },
            { level: 6, word: "ABOULIE", definitions: ["Trouble psychique caractérisé par l'incapacité de prendre des décisions ou de faire des efforts."] },
            { level: 6, word: "ABOULIQUE", definitions: ["Atteint d'aboulie."] },
            { level: 6, word: "ABOUT", definitions: ["Extrémité d'une pièce de bois ou de métal."] },
            { level: 6, word: "ABOUTAGE", definitions: ["Action d'abouter ; jonction de pièces bout à bout."] },
            { level: 6, word: "ABOUTER", definitions: ["Joindre deux pièces bout à bout."] },
            { level: 6, word: "ABOUTÉ", definitions: ["Joint bout à bout."] },
            { level: 6, word: "ABOUTISSANT", definitions: ["(Part. prés.) Qui aboutit.", "(Subst.) Aboutissants : détails, circonstances d'une affaire."] },
            { level: 6, word: "AB OVO", definitions: ["Depuis l'origine, dès le début (locution latine)."] },
            { level: 6, word: "ABRACADABRA", definitions: ["Mot mystérieux, formule magique utilisée autrefois contre les maladies."] },
            { level: 6, word: "ABRACADABRANTESQUE", definitions: ["Qui ressemble à ce qui est abracadabrant."] },
            { level: 6, word: "ABRASEMENT", definitions: ["Action d'abaser, d'user par frottement."] },
            { level: 6, word: "ABRÉGEMENT", definitions: ["Action d'abréger (temps, durée)."] },
            { level: 6, word: "ABRÉGÉMENT", definitions: ["De manière abrégée, brièvement."] },
            { level: 6, word: "ABREUVAGE", definitions: ["Action d'abreuver, de faire boire."] },
            { level: 6, word: "ABREUVEMENT", definitions: ["Action de faire boire des animaux."] },
            { level: 6, word: "ABRÉVIATIVEMENT", definitions: ["Par abréviation."] },
            { level: 6, word: "ABRÉVIATURE", definitions: ["Système d'écriture abrégée (terme vieilli)."] },
            { level: 6, word: "ABSCISION", definitions: ["Action de retrancher une partie molle peu volumineuse du corps.", "Endroit du pétiole d'une feuille où celle-ci se détache de la tige."] },
            { level: 6, word: "ABSIDIOLE", definitions: ["Petite abside secondaire, souvent autour d'une abside principale."] },
            { level: 6, word: "ABSINTHISME", definitions: ["Intoxication chronique due à l'abus d'absinthe (liqueur)."] },
            { level: 6, word: "ABSOLUITÉ", definitions: ["Caractère de ce qui est absolu."] },
            { level: 6, word: "ABSORBEUR", definitions: ["(Adj. et Subst.) Qui absorbe, appareil ou substance destiné à absorber."] },
            { level: 6, word: "ABSORPTIF", definitions: ["Qui a la propriété d'absorber."] },
            { level: 6, word: "ABSTERGENT", definitions: ["(Adj. et Subst.) Qui a la propriété de nettoyer, de déterger."] },
            { level: 6, word: "ABSTERSION", definitions: ["Action de nettoyer (une plaie) (terme médical vieilli)."] },
            { level: 6, word: "ABSTRACT", definitions: ["Résumé d'un article ou d'un ouvrage scientifique (Anglicisme)."] },
            { level: 6, word: "ABSTRACTEUR", definitions: ["(Adj. et Subst.) Qui abstrait."] },
            { level: 6, word: "ABSTRACTIF", definitions: ["(Adj. et Subst.) Qui a le pouvoir d'abstraire."] },
            { level: 6, word: "ABSURDIFIANT", definitions: ["Qui rend absurde, qui mène à l'absurdité."] },
            { level: 6, word: "ABYSSIN", definitions: ["Relatif à l'Abyssinie (ancienne Éthiopie). // ABYSSINIEN"] },
            { level: 6, word: "ACADÉMISTE", definitions: ["Adepte ou partisan de l'académisme."] },
            { level: 6, word: "ACANTHE", definitions: ["Plante méditerranéenne ornementale, dont la feuille a inspiré l'architecture corinthienne."] },
            { level: 6, word: "ACARE", definitions: ["Petit arthropode, souvent parasite, comme la tique ou la sarcopte. // ACARUS"] },





















            // NIVEAU 7 (Expert)
            { level: 7, word: "ABADDIR", definitions: ["Météorites considérées comme objets divins.","Pierre enveloppée de langes, que Saturne dévora à la place de son fils Jupiter."] },
            { level: 7, word: "ABAISSÉ", definitions: ["(bot.) Se dit qqf. de la lèvre inférieure d'une corolle labiée, quand elle forme un angle presque droit avec le tube.", "(hérald.) Se dit du vol des oiseaux, quand leurs ailes sont pliées, ou que l'extrémité en est dirigée vers la pointe de l'écu; du chevron, du pal, de la bande, quand la pointe finit au cœur de l'écu, ou au-dessous, et ne monte pas plus haut, et, en gén., de toutes les pièces de l'écu qui se trouvent au-dessous de leur situation ordin."] },
            { level: 7, word: "ABAISSÉE", definitions: ["(ornith. et aviat.) Action de baisser les ailes; durée de cette action."] },
            { level: 7, word: "ABANDONNATAIRE", definitions: ["(Dr.) Pers. en faveur de qui est fait un abandon de biens."] },
            { level: 7, word: "ABANLIEUE", definitions: ["(Vieilli) Banlieue, faubourgs voisins d'une ville."] },
            { level: 7, word: "ABARTICULAIRE", definitions: ["Qui concerne l'abarticulation."] },
            { level: 7, word: "ABARTICULATION", definitions: ["(anat.) Articulation qui jouit d'une grande mobilité. Ce mot est synonyme de diarthrose, auquel il a été substitué par quelques auteurs qui ont écrit en latin."] },
            { level: 7, word: "ABAS", definitions: ["Nom donné en Perse au poids qui sert à peser les perles.","(dial.) Nom donné, dans le pays de la Loire, à l'ouest; ou encore à l'aval (du fleuve); s'oppose dans ce cas à amont."] },
            { level: 7, word: "ABAT-CHAUVÉE", definitions: ["(région.) Nom donné dans certaines régions à une laine de basse qualité."] },
            { level: 7, word: "ABAT-FEUILLE", definitions: ["(impr.) Dispositif destiné à maintenir la feuille sur le cylindre de la presse."] },
            { level: 7, word: "ABAT-FLANC", definitions: ["(rég.) Planche suspendue verticalement par des cordes à une certaine hauteur au-dessus du sol d'une écurie et qui sépare deux chevaux, ordinairement retenue par un crochet à la mangeoire et par une corde au plafond. Elle est mobile."] },
            { level: 7, word: "ABAT-RELUI", definitions: ["(arg.) Abat-jour pour vieillards."] },
            { level: 7, word: "ABBEVILLIEN", definitions: ["(préhist.) (géol.) Faciès du paléolithique ancien, dont l'industrie est caractérisée par de grossiers bifaces et un outillage fruste sur éclat.", "Relatif à la ville d'Abbeville."] },
            { level: 7, word: "ABCÉDER", definitions: ["(méd.) Se transformer en abcès."] },
            { level: 7, word: "ABDALAS", definitions: ["Nom des religieux en Perse, correspondant à derviche chez les Turcs, à moine chez les chrétiens."] },
            { level: 7, word: "ABDOMINOSCOPIE", definitions: ["(méd.) Examen de l'abdomen qui se fait à l'aide du palper et de la percussion sur le doigt ou sur le plessimètre."] },
            { level: 7, word: "ABDOMINOSCOPIQUE", definitions: ["(méd.) Relatif à l'abdominoscopie."] },
            { level: 7, word: "ABEAUDIR", definitions: ["Devenir plus clair ou lumineux. Se transformer en un état de beau temps."] },
            { level: 7, word: "ABECQUAGE", definitions: ["Action de voler dans le foyer où l'on est employé comme domestique, en abusant de l'hospitalité offerte."] },
            { level: 7, word: "ABECQUEUSE", definitions: ["(arg.) Nourrice ou maîtresse d'hôtel.", "(fig.) Femme qui vole dans les magasins en utilisant un enfant pour dissimuler ses actes."] },
            { level: 7, word: "ABÉE", definitions: ["Ouverture pour le passage de l'eau qui fait mouvoir un moulin.","Canal de décharge pour l'écoulement de l'eau quand un moulin ne tourne pas."] },
            { level: 7, word: "ABÉLIEN", definitions: ["(math.) Relatif aux fonctions et aux groupes introduits par le mathématicien Abel."] },
            { level: 7, word: "ABIÉTACÉE", definitions: ["Famille de plantes gymnospermes, synonyme de Pinacées (Botanique)."] },
            { level: 7, word: "ABIÉTIN", definitions: ["Relatif au sapin ou aux abiétacées ; qui rappelle l'odeur du sapin."] },
            { level: 7, word: "ABIÉTINE", definitions: ["Acide résineux que l'on extrait de la colophane, substance du sapin."] },
            { level: 7, word: "ABIÉTINÉ", definitions: ["Qui ressemble au sapin.","(Surtout au plur.) Famille de conifères ayant le sapin pour type (genres princ. : sapins, pins, cèdres, mélèzes, araucarias, tsugas, etc.)"] },
            { level: 7, word: "ABIÉTIQUE", definitions: ["Relatif à l'abiétine ; se dit d'un acide organique qui dérive du sapin (Chimie)."] },
            { level: 7, word: "ABIGOTIR", definitions: ["(Vieilli) Agiter fortement, secouer avec violence."] },
            { level: 7, word: "ABIOGENÈSE", definitions: ["Génération spontanée de la vie à partir de matière inorganique (Biologie)."] },
            { level: 7, word: "ABIOTIQUE", definitions: ["Qui n'est pas lié à la vie ou aux organismes vivants (ex: facteurs abiotiques comme la température)."] },
            { level: 7, word: "ABLÉGAT", definitions: ["Envoyé extraordinaire du pape, sans les pleins pouvoirs du légat (Religion)."] },
            { level: 7, word: "ABLÉPHARE", definitions: ["Personne ou animal atteint d'ablépharie."] },
            { level: 7, word: "ABLERET", definitions: ["Filet carré, formé de fils très fins et attaché au bout d'une perche, employé pour la pêche des ables et autres petits poissons. ","(// ABLIER)"] },
            { level: 7, word: "ABLET", definitions: ["Petit poisson de la famille des Cyprinidés, voisin de l'ablette."] },
            { level: 7, word: "ABLUER", definitions: ["Laver, rincer avec un liquide (Chimie, Pharmacie)."] },
            { level: 7, word: "ABOLISSEMENT", definitions: ["Action d'abolir (terme rare, synonyme d'abolition)."] },
            { level: 7, word: "ABOMA", definitions: ["Grand serpent constricteur d'Amérique du Sud, comme le boa ou l'anaconda."] },
            { level: 7, word: "ABONNISSEMENT", definitions: ["Action d'abonir, d'améliorer."] },
            { level: 7, word: "ABORAL", definitions: ["Situé à l'opposé de la bouche (Biologie, Zoologie)."] },
            { level: 7, word: "ABORDÉE", definitions: ["(Vx, Mar.) Action d'accoster ou d'attaquer un navire."] },
            { level: 7, word: "ABOT", definitions: ["Entrave que l'on met aux pieds d'un cheval pour le retenir."] }, 
            { level: 7, word: "ABOUGRIR", definitions: ["Rendre chétif, rabougri."] },
            { level: 7, word: "ABOUGRI", definitions: ["Rendu chétif, rabougri."] },
            { level: 7, word: "ABOUTEMENT", definitions: ["Jonction, assemblage de pièces bout à bout."] },
            { level: 7, word: "ABOUTONNER", definitions: ["Joindre bord à bord par des boutons."] },
            { level: 7, word: "ABRAMIDE", definitions: ["Poisson de la famille des Cyprinidés, comme la brème."] },
            { level: 7, word: "ABRAQUER", definitions: ["(Mar.) Serrer, retirer les cordages d'un gréement."] },
            { level: 7, word: "ABRAS", definitions: ["(Art) Garniture de fer qui entoure le manche d’un marteau de forge."] },
            { level: 7, word: "ABRASER", definitions: ["User par frottement, par friction (médecine, technique)."] },
            { level: 7, word: "ABRASIN", definitions: ["Arbre dont les graines fournissent une huile siccative, utilisée dans les vernis."] },
            { level: 7, word: "ABRAXAS", definitions: ["Mot symbolisant les 365 émanations du Dieu Suprême pour la secte gnostique des basilidiens (selon saint Jérôme, serait également Mithra, dieu solaire des Perses)","Genre de papillon nocturne, dont la chenille vit sur les groseilliers"] },
            { level: 7, word: "ABRÉACTEUR", definitions: ["Personne qui abréagit."] },
            { level: 7, word: "ABRÉACTION", definitions: ["Décharge émotionnelle qui libère d'un affect pénible refoulé."] },
            { level: 7, word: "ABRÉAGIR", definitions: ["Se libérer d'un choc affectif refoulé par une décharge émotionnelle."] },
            { level: 7, word: "ABREUVEUR", definitions: ["Personne qui abreuve."] },
            { level: 7, word: "ABRÈVEMENT", definitions: ["Diminution de la durée (rare)."] },
            { level: 7, word: "ABRICOTIN", definitions: ["Sorte d'abricot de petite taille."] },
            { level: 7, word: "ABRIER", definitions: ["Mettre à l'abri, couvrir (terme vieilli ou régional)."] },
            { level: 7, word: "ABRI-FOU", definitions: ["Lieu, installation servant à mettre à l'abri des fous (personnes atteintes de folie)."] },
            { level: 7, word: "ABRI-GALANT", definitions: ["Petit endroit caché, abrité, propice aux rencontres amoureuses."] },
            { level: 7, word: "ABRI-SOUS-ROCHE", definitions: ["Cavité peu profonde au pied d'une paroi rocheuse en surplomb, ayant servi d'habitation préhistorique."] },
            { level: 7, word: "ABRITEMENT", definitions: ["Action d'abriter."] },
            { level: 7, word: "ABROTONE", definitions: ["(Subst.) Plante méditerranéenne aux feuilles finement découpées et odorantes. // ABROTANUM"] },
            { level: 7, word: "ABROUTIR", definitions: ["Brouter les jeunes pousses d'un arbre, d'un arbuste."] },
            { level: 7, word: "ABROUTIS", definitions: ["Lieu brouté par le bétail (terme d'agriculture)."] },
            { level: 7, word: "ABRUPTION", definitions: ["Coupure brusque."] },
            { level: 7, word: "ABRUTISSOIR", definitions: ["Instrument ou outil qui abrutit (sens figuré, ironique)."] },
            { level: 7, word: "ABSCONDRE", definitions: ["Cacher, dissimuler profondément (très rare)."] },
            { level: 7, word: "ABSENTEMENT", definitions: ["Action de s'absenter (rare)."] },
            { level: 7, word: "ABSIDAL", definitions: ["Qui appartient à l'abside."] },
            { level: 7, word: "ABSINTHAGE", definitions: ["Action de mêler de l'absinthe à quelque chose."] },
            { level: 7, word: "ABSINTHER", definitions: ["Mêler à de l'absinthe."] },
            { level: 7, word: "ABSINTHÉ", definitions: ["Qui contient de l'absinthe."] },
            { level: 7, word: "ABSINTHINE", definitions: ["Principe amer de l'absinthe."] },
            { level: 7, word: "ABSINTHIQUE", definitions: ["Relatif à l'absinthe, qui en est tiré."] },
            { level: 7, word: "ABSOLUTIONNEL", definitions: ["Relatif à l'absolution."] },
            { level: 7, word: "ABSOLUTISER", definitions: ["Rendre absolu, donner le caractère d'absolu."] },
            { level: 7, word: "ABSORBATION", definitions: ["Action d'absorber, d'être absorbé."] },
            { level: 7, word: "ABSOUTE", definitions: ["Absolution (terme vieilli)."] },
            { level: 7, word: "ABSTENANT", definitions: ["Personne qui s'abstient (en particulier d'alcool)."] },
            { level: 7, word: "ABSTERGER", definitions: ["Nettoyer (une plaie, la peau) (terme médical vieilli)."] },
            { level: 7, word: "ABTERSIF", definitions: ["(Adj. et Subst.) Abstergent."] },
            { level: 7, word: "ABSTRACTIVEMENT", definitions: ["Par abstraction."] },
            { level: 7, word: "ABSTRUSION", definitions: ["Action d'abstruder (terme rare)."] },
            { level: 7, word: "ABUSEMENT", definitions: ["Action d'abuser, de tromper (terme vieilli)."] },
            { level: 7, word: "ABUTILON", definitions: ["Genre de plantes herbacées ou arbustives de la famille des Malvacées."] },
            { level: 7, word: "ABYSSINIQUE", definitions: ["Relatif à l'Abyssinie."] },
            { level: 7, word: "ABYSSIQUE", definitions: ["Relatif aux grands fonds marins."] },
            { level: 7, word: "ACA", definitions: ["Pluie torrentielle, trombe d'eau"] },
            { level: 7, word: "ACACHER", definitions: ["(Vx) Cacher, dissimuler."] },
            { level: 7, word: "ACADÉMIFIER", definitions: ["Donner un caractère académique, rendre classique. // ACADÉMISIER"] },
            { level: 7, word: "ACADÉMISABLE", definitions: ["Qui peut être admis dans une académie."] },
            { level: 7, word: "ACADÉMISATION", definitions: ["Action d'académiser."] },
            { level: 7, word: "ACADÉMISER", definitions: ["Donner un caractère académique à."] },
            { level: 7, word: "ACAGNARDER", definitions: ["(Pronom.) S'accoutumer à la paresse, à la vie casanière."] },
            { level: 7, word: "ACAGNARDÉ", definitions: ["Qui est accoutumé à la paresse. // ACAGNARDI"] },
            { level: 7, word: "ACAJUBA", definitions: ["Nom générique d'arbres à bois dur originaires d'Afrique tropicale."] },
            { level: 7, word: "ACALÈPHE", definitions: ["Animal marin pélagique, comme la méduse."] },
            { level: 7, word: "S'ACALIFOURCHONNER", definitions: ["S'asseoir à califourchon, les jambes pendantes de chaque côté."] },
            { level: 7, word: "ACALIFOURCHONNÉ", definitions: ["Assis à califourchon."] },
            { level: 7, word: "S'ACANILLER", definitions: ["(Mar.) Mettre un cordage dans le canal d'un poulie."] },
            { level: 7, word: "ACANTHACÉ", definitions: ["Relatif aux Acanthus (famille de plantes) ; (Subst.) Famille de plantes dicotylédones."] },
            { level: 7, word: "ACANTHAIRE", definitions: ["Protozoaire marin possédant un squelette de spicules siliceux."] },
            { level: 7, word: "ACAP", definitions: ["(Mar.) Sorte de voilure carrée utilisée en Asie."] },
            { level: 7, word: "ACAPER", definitions: ["(Mar.) Réparer un mât brisé par le milieu."] },
            { level: 7, word: "ACAPNIE", definitions: ["Diminution de la quantité de dioxyde de carbone dans le sang."] },


















            
            // NIVEAU 8 (Démon)
            { level: 8, word: "ABALOBER", definitions: ["(Régional) Étonner, ébahir, avec une nuance d'admiration plutôt que de crainte."] },
            { level: 8, word: "ABASIE", definitions: ["(neurologie.) Perte plus ou moins complète de la marche, due à des troubles nerveux indépendants de la force musculaire de l'individu."] },
            { level: 8, word: "ABERROGRAPHE", definitions: ["Instrument servant à mesurer et à enregistrer les écarts ou aberrations optiques d'un système.", "(astro.) Dispositif utilisé en astronomie pour analyser et corriger les déviations des images stellaires causées par l'atmosphère."] },
            { level: 8, word: "ABERROSCOPE", definitions: ["Instrument utilisé pour mesurer et analyser les aberrations optiques dans les systèmes de lentilles."] },
            { level: 8, word: "ABESSIF", definitions: ["(gramm.) Cas exprimant l'absence ou le manque d'un élément."] },
            { level: 8, word: "ABIGÉAT", definitions: ["Vol de bétail (Droit ancien)."] },
            { level: 8, word: "ABIOSE", definitions: ["État d'un organisme ou d'un tissu privé de vie."] },
            { level: 8, word: "ABLÉGATION", definitions: ["Action d'envoyer un ablegat (Religion)."] },
            { level: 8, word: "ABLÉPHARIE", definitions: ["Absence congénitale des paupières (Médecine)."] },
            { level: 8, word: "ABLÉPHAROPLASTIQUE", definitions: ["Relatif à la reconstruction des paupières (Chirurgie)."] },
            { level: 8, word: "ABORTO-PRÉVENTIF", definitions: ["Qui a pour effet de prévenir l'avortement."] },
            { level: 8, word: "ABOTEAU", definitions: ["Petit abot."] },
            { level: 8, word: "ABOUCHEUR", definitions: ["Personne qui abouche des conduits, qui assure une jonction."] },
            { level: 8, word: "ABOUGRISSEMENT", definitions: ["Action d'abougrir ; état de ce qui est rabougri."] },
            { level: 8, word: "ABRACADABRANTISME", definitions: ["Caractère abracadabrant."] },
            { level: 8, word: "ABRACADABRER", definitions: ["Proférer des paroles inintelligibles, faire de la magie."] },
            { level: 8, word: "ABRANCHE", definitions: ["(Adj. et Subst.) Qualifie un animal aquatique dépourvu de branchies."] },
            { level: 8, word: "ABRASIMÈTRE", definitions: ["Appareil de mesure de la résistance d'un matériau à l'abrasion."] },
            { level: 8, word: "ABRINE", definitions: ["Graine de l'abrus, très toxique."] },
            { level: 8, word: "ABROTONITE", definitions: ["Plante de la famille des Composées."] },
            { level: 8, word: "ABROTONOÏDE", definitions: ["Qui ressemble à l'abrotone."] },
            { level: 8, word: "ABROUTISSEMENT", definitions: ["Action d'abroutir ; état d'une végétation abroutée."] },
            { level: 8, word: "ABRUPTIPENNÉ", definitions: ["(Oiseau) dont les pennes (grandes plumes) sont coupées brusquement à l'extrémité."] },
            { level: 8, word: "ABSALONIEN", definitions: ["Relatif à Absalon, personnage biblique, ou à l'archevêque Absalon de Lund."] },
            { level: 8, word: "ABSINTHATE", definitions: ["Sel de l'acide absinthique."] },
            { level: 8, word: "ABSINTHOL", definitions: ["Composé chimique présent dans l'huile essentielle d'absinthe."] },
            { level: 8, word: "ABSORBANTER", definitions: ["(Rare) Devenir absorbant, captiver."] },
            { level: 8, word: "ABSORPTIVITÉ", definitions: ["Propriété d'absorber (Lumière, chaleur, etc.)."] },
            { level: 8, word: "ABSTENTIONNITE", definitions: ["Tendance à l'abstentionnisme."] },
            { level: 8, word: "ABSTRACTIVITÉ", definitions: ["Pouvoir d'abstraction."] },
            { level: 8, word: "ABYSSOPÉLAGIQUE", definitions: ["Relatif aux eaux libres (pélagiques) situées au-dessus des grands fonds."] },
            { level: 8, word: "AÇAINTE", definitions: ["Terme désignant un serpent venimeux mythique."] },
            { level: 8, word: "ACAMANDÉ", definitions: ["Qualifie une pierre qui a un éclat semblable à l'amande."] },
        ];

        // --- Base de données des expressions ---
        const expressionList = [
            { level: 1, expression: "Avoir la frite", options: ["Être en pleine forme", "Aimer les pommes de terre", "Être en colère"], correctAnswer: "Être en pleine forme" },
            { level: 1, expression: "Être à l'ouest", options: ["Être distrait, perdu", "Partir en vacances", "Regarder le soleil se coucher"], correctAnswer: "Être distrait, perdu" },
            { level: 1, expression: "Les doigts dans le nez", options: ["Très facilement", "En se salissant", "Avec difficulté"], correctAnswer: "Très facilement" },
            
            { level: 2, expression: "Avoir la grosse tête", options: ["Être prétentieux", "Avoir mal à la tête", "Être très intelligent"], correctAnswer: "Être prétentieux" },
            { level: 2, expression: "Avoir un cœur d'artichaut", options: ["Tomber amoureux facilement", "Avoir une maladie cardiaque", "Aimer les légumes"], correctAnswer: "Tomber amoureux facilement" },
            { level: 2, expression: "Faire chou blanc", options: ["Échouer", "Réussir un gâteau", "Jardiner"], correctAnswer: "Échouer" },
            { level: 2, expression: "Poser un lapin", options: ["Ne pas venir à un rendez-vous", "Offrir un cadeau", "Cuisiner un ragoût"], correctAnswer: "Ne pas venir à un rendez-vous" },
            
            { level: 3, expression: "Avoir le cœur sur la main", options: ["Être très généreux", "Avoir une maladie cardiaque", "Être amoureux"], correctAnswer: "Être très généreux" },
            { level: 3, expression: "Avoir le moral dans les chaussettes", options: ["Être très déprimé", "Avoir froid aux pieds", "Être joyeux"], correctAnswer: "Être très déprimé" },
            { level: 3, expression: "Avoir un chat dans la gorge", options: ["Être enroué", "Avoir mangé un animal", "Aimer les félins"], correctAnswer: "Être enroué" },
            { level: 3, expression: "Coûter un bras", options: ["Coûter très cher", "Être une bonne affaire", "Se blesser"], correctAnswer: "Coûter très cher" },
            { level: 3, expression: "Tirer les marrons du feu", options: ["Faire tout le travail pour le profit d'autrui", "Réussir un examen très difficile", "Cuisiner des châtaignes"], correctAnswer: "Faire tout le travail pour le profit d'autrui" },
            { level: 3, expression: "Remuer ciel et terre", options: ["Faire des travaux de jardinage intensifs", "Faire tout son possible, déployer des efforts considérables", "Provoquer une catastrophe naturelle"], correctAnswer: "Faire tout son possible, déployer des efforts considérables" },
            { level: 3, expression: "Vouloir le beurre et l'argent du beurre", options: ["Être très gourmand", "Vouloir tout avoir, l'avantage et son prix", "Vouloir acheter du beurre à bas prix"], correctAnswer: "Vouloir tout avoir, l'avantage et son prix" },
            { level: 3, expression: "Mettre la charrue avant les bœufs", options: ["Faire les choses dans le désordre", "Être très efficace", "Travailler dur"], correctAnswer: "Faire les choses dans le désordre" },
            { level: 3, expression: "Avoir voix au chapitre", options: ["Avoir une belle voix pour chanter", "Avoir le droit de donner son avis", "Parler fort dans une réunion"], correctAnswer: "Avoir le droit de donner son avis" },
            { level: 3, expression: "Rouler des mécaniques", options: ["Se vanter, être prétentieux", "Réparer une voiture", "Faire du sport"], correctAnswer: "Se vanter, être prétentieux" },
            { level: 3, expression: "Faire amende honorable", options: ["Payer une dette due à un tiers", "S'excuser publiquement pour une faute", "Faire un discours élogieux"], correctAnswer: "S'excuser publiquement pour une faute" },
            { level: 3, expression: "Avoir le vent en poupe", options: ["Pratiquer la voile en été", "Être favorisé par les circonstances, avoir de la chance", "Attendre que le temps change"], correctAnswer: "Être favorisé par les circonstances, avoir de la chance" },
            { level: 3, expression: "Battre en retraite", options: ["S'enfuir devant l'ennemi", "Démarrer une nouvelle activité", "Frapper des objets pour faire du bruit"], correctAnswer: "S'enfuir devant l'ennemi" },
            { level: 3, expression: "Sauter du coq à l'âne", options: ["Changer de sujet de manière imprévue", "Faire un sport extrême", "Se tromper d'animal"], correctAnswer: "Changer de sujet de manière imprévue" },
            
            { level: 4, expression: "Appeler un chat un chat", options: ["Parler franchement", "Aimer les animaux", "Se tromper"], correctAnswer: "Parler franchement" },
            { level: 4, expression: "Avoir le cafard", options: ["Être déprimé", "Aimer les insectes", "Avoir peur"], correctAnswer: "Être déprimé" },
            { level: 4, expression: "Donner sa langue au chat", options: ["Renoncer à deviner", "Parler à un animal", "Dire un secret"], correctAnswer: "Renoncer à deviner" },
            { level: 4, expression: "Mettre de l'huile sur le feu", options: ["Envenimer une situation", "Cuisiner", "Calmer le jeu"], correctAnswer: "Envenimer une situation" },
            { level: 4, expression: "Être le dindon de la farce", options: ["Être la victime d'une mauvaise plaisanterie", "Être très maladroit", "Avoir un rôle principal au théâtre"], correctAnswer: "Être la victime d'une mauvaise plaisanterie" },
            { level: 4, expression: "Se faire l'avocat du diable", options: ["Défendre une cause perdue d'avance", "Soutenir une opinion que l'on ne partage pas pour stimuler le débat", "Travailler pour une mauvaise personne"], correctAnswer: "Soutenir une opinion que l'on ne partage pas pour stimuler le débat" },
            { level: 4, expression: "Jeter l'éponge", options: ["Abandonner un combat ou une entreprise", "Nettoyer rapidement une surface", "Se préparer à nager"], correctAnswer: "Abandonner un combat ou une entreprise" },
            { level: 4, expression: "Être sur la sellette", options: ["Se préparer à être photographié", "Être l'objet d'une accusation, d'un examen critique", "S'asseoir sur un siège inconfortable"], correctAnswer: "Être l'objet d'une accusation, d'un examen critique" },
            { level: 4, expression: "Se tirer d'affaire", options: ["Se sortir d'une situation difficile", "Quitter une réunion discrètement", "Être fatigué après une épreuve"], correctAnswer: "Se sortir d'une situation difficile" },
            { level: 4, expression: "Rendre la monnaie de sa pièce", options: ["Être généreux avec les autres", "Se venger d'un affront", "Acheter un produit coûteux"], correctAnswer: "Se venger d'un affront" },
            { level: 4, expression: "Avoir une épée de Damoclès", options: ["Être sur le point de gagner un combat", "Être sous la menace d'un danger imminent", "Posséder une vieille arme de collection"], correctAnswer: "Être sous la menace d'un danger imminent" },
            { level: 4, expression: "Prendre ses désirs pour des réalités", options: ["Confondre ce qu'on veut et ce qui est vrai", "Avoir des objectifs très clairs", "Faire des rêves prémonitoires"], correctAnswer: "Confondre ce qu'on veut et ce qui est vrai" },
            
            { level: 5, expression: "Chercher midi à quatorze heures", options: ["Compliquer les choses inutilement", "Être très ponctuel", "Avoir faim"], correctAnswer: "Compliquer les choses inutilement" },
            { level: 5, expression: "Couper les cheveux en quatre", options: ["Être un bon coiffeur", "Chercher des détails inutiles", "Partager équitablement"], correctAnswer: "Chercher des détails inutiles" },
            { level: 5, expression: "En faire tout un fromage", options: ["Exagérer l'importance d'un problème", "Cuisiner un plat", "Acheter du fromage"], correctAnswer: "Exagérer l'importance d'un problème" },
            { level: 5, expression: "Ne pas avoir froid aux yeux", options: ["Être audacieux, ne pas avoir peur", "Avoir une bonne vue", "Avoir chaud"], correctAnswer: "Être audacieux, ne pas avoir peur" },
            { level: 5, expression: "Être un pavé dans la mare", options: ["Être une nuisance pour les animaux aquatiques", "Provoquer un émoi ou un scandale inattendu", "Être une personne très lourde"], correctAnswer: "Provoquer un émoi ou un scandale inattendu" },
            { level: 5, expression: "Ne pas être sorti de l'auberge", options: ["Avoir encore beaucoup de difficultés à affronter", "Ne pas pouvoir payer le restaurant", "Dormir à l'hôtel"], correctAnswer: "Avoir encore beaucoup de difficultés à affronter" },
            { level: 5, expression: "Avoir pignon sur rue", options: ["Être très connu, avoir une entreprise établie et bien visible", "Posséder une maison de campagne", "Travailler dans la construction"], correctAnswer: "Être très connu, avoir une entreprise établie et bien visible" },
            { level: 5, expression: "Couper l'herbe sous le pied", options: ["Gagner une course de vitesse", "Devancer quelqu'un pour lui ôter l'avantage", "Travailler dans l'agriculture"], correctAnswer: "Devancer quelqu'un pour lui ôter l'avantage" },
            { level: 5, expression: "Prendre ses jambes à son cou", options: ["S'enfuir très rapidement", "Avoir des crampes", "Faire de la gymnastique"], correctAnswer: "S'enfuir très rapidement" },
            { level: 5, expression: "Avoir les yeux plus gros que le ventre", options: ["Avoir une excellente vue", "Être très gourmand, vouloir manger plus que ce que l'on peut", "Avoir de grands yeux"], correctAnswer: "Être très gourmand, vouloir manger plus que ce que l'on peut" },
            { level: 5, expression: "Mettre son grain de sel", options: ["Donner son avis sans y être invité, se mêler d'une conversation", "Assaisonner un plat", "Être très bavard"], correctAnswer: "Donner son avis sans y être invité, se mêler d'une conversation" },
        
            { level: 6, expression: "Avoir le feu au derrière", options: ["Être très pressé", "Avoir chaud", "Être en colère"], correctAnswer: "Être très pressé" },
            { level: 6, expression: "Se noyer dans un verre d'eau", options: ["Être découragé par une difficulté minime", "Boire trop vite", "Aimer nager"], correctAnswer: "Être découragé par une difficulté minime" },
            { level: 6, expression: "Manger son chapeau", options: ["Faire une pause-déjeuner", "Reconnaître qu'on a eu tort après une déclaration", "Être très gourmand"], correctAnswer: "Reconnaître qu'on a eu tort après une déclaration" },
            { level: 6, expression: "Mettre la charrue avant les bœufs", options: ["Commencer par la fin, faire les choses dans le désordre", "Avoir trop de travail en même temps", "Travailler de nuit"], correctAnswer: "Commencer par la fin, faire les choses dans le désordre" },
            { level: 6, expression: "Vouer aux gémonies", options: ["Faire l'éloge de quelqu'un", "Exposer quelqu'un à l'ignominie, au mépris public", "Faire un sacrifice aux dieux"], correctAnswer: "Exposer quelqu'un à l'ignominie, au mépris public" },
            { level: 6, expression: "Dormir sur ses deux oreilles", options: ["Dormir très profondément, être en sécurité", "Avoir de gros problèmes de sommeil", "Être très attentif"], correctAnswer: "Dormir très profondément, être en sécurité" },
            { level: 6, expression: "Se faire hara-kiri", options: ["S'auto-détruire ou se nuire gravement", "Exécuter une danse traditionnelle japonaise", "Faire un plat japonais"], correctAnswer: "S'auto-détruire ou se nuire gravement" },
            { level: 6, expression: "Être un cheval de Troie", options: ["Se faire passer pour un allié dans le but de nuire", "Être très fort et musclé", "Aimer les chevaux"], correctAnswer: "Se faire passer pour un allié dans le but de nuire" },
            { level: 6, expression: "Se regarder le nombril", options: ["Être prétentieux, égocentrique", "Faire du yoga", "Avoir mal au ventre"], correctAnswer: "Être prétentieux, égocentrique" },

            { level: 7, expression: "Faire long feu", options: ["Échouer, ne pas durer longtemps", "Faire un grand barbecue", "Réussir brillamment"], correctAnswer: "Échouer, ne pas durer longtemps" },
            { level: 7, expression: "Passer sous les fourches caudines", options: ["Subir une défaite humiliante", "Passer un examen difficile", "Se marier"], correctAnswer: "Subir une défaite humiliante" },
            { level: 7, expression: "Remettre aux calendes grecques", options: ["Reporter à une date qui n'arrivera jamais", "Planifier un voyage en Grèce", "Payer une dette"], correctAnswer: "Reporter à une date qui n'arrivera jamais" },
            { level: 7, expression: "Tenir le haut du pavé", options: ["Occuper une position sociale élevée", "Nettoyer la rue", "Marcher avec difficulté"], correctAnswer: "Occuper une position sociale élevée" },
            { level: 7, expression: "De fraîche date", options: ["Être périmé depuis peu", "Être récent, dater de peu de temps", "Venir d'une zone froide"], correctAnswer: "Être récent, dater de peu de temps" },
            { level: 7, expression: "Faire flèche de tout bois", options: ["Utiliser tous les moyens possibles pour atteindre son but", "Être un très bon archer", "Dépenser sans compter"], correctAnswer: "Utiliser tous les moyens possibles pour atteindre son but" },
            { level: 7, expression: "Couper les ponts", options: ["Détruire une construction pour empêcher un passage", "Rompre définitivement toute relation avec quelqu'un", "Faire une pause dans un voyage"], correctAnswer: "Rompre définitivement toute relation avec quelqu'un" },
            { level: 7, expression: "Rendre gorge", options: ["Vomir un plat qui n'a pas plu", "Être contraint de restituer ce qui a été acquis malhonnêtement", "Chanter très fort"], correctAnswer: "Être contraint de restituer ce qui a été acquis malhonnêtement" },
            { level: 7, expression: "Être aux antipodes", options: ["Être à l'opposé complet, très éloigné (au sens figuré)", "Être très proche de quelqu'un", "Voyager dans l'hémisphère sud"], correctAnswer: "Être à l'opposé complet, très éloigné (au sens figuré)" },
            { level: 7, expression: "Tirer à hue et à dia", options: ["Tirer dans deux directions opposées, être en désaccord", "Faire un effort concerté", "Être très rapide"], correctAnswer: "Tirer dans deux directions opposées, être en désaccord" },
            { level: 7, expression: "Tomber de Charybde en Scylla", options: ["Échapper à un péril pour en rencontrer un pire", "Faire une croisière en Grèce", "Avoir beaucoup de chance"], correctAnswer: "Échapper à un péril pour en rencontrer un pire" },

            { level: 8, expression: "Découvrir le pot aux roses", options: ["Découvrir un secret, une supercherie", "Trouver un trésor", "Jardiner"], correctAnswer: "Découvrir un secret, une supercherie" },
            { level: 8, expression: "La montagne a accouché d'une souris", options: ["Un grand projet donne un résultat ridicule", "Un miracle s'est produit", "Une catastrophe est arrivée"], correctAnswer: "Un grand projet donne un résultat ridicule" },
            { level: 8, expression: "Payer en monnaie de singe", options: ["Payer avec de fausses promesses", "Utiliser une devise étrangère", "Acheter un animal"], correctAnswer: "Payer avec de fausses promesses" },
            { level: 8, expression: "Tirer à boulets rouges", options: ["Chasser le gibier en forêt", "Critiquer quelqu'un avec acharnement", "Faire exploser un objet"], correctAnswer: "Critiquer quelqu'un avec acharnement" },
            { level: 8, expression: "S'entendre comme larrons en foire", options: ["Être très complices (souvent pour de mauvais coups)", "Se disputer sur un marché", "Aimer la fête"], correctAnswer: "Être très complices (souvent pour de mauvais coups)" },
            { level: 8, expression: "Ne pas valoir tripette", options: ["Avoir une valeur négligeable, être sans importance", "Être très généreux", "Avoir de petits problèmes de santé"], correctAnswer: "Avoir une valeur négligeable, être sans importance" },
            { level: 8, expression: "Tirer au flanc", options: ["Éviter de travailler, être paresseux", "Viser une cible avec précision", "Se reposer après un effort physique"], correctAnswer: "Éviter de travailler, être paresseux" },
            { level: 8, expression: "Noyer le poisson", options: ["Embrouiller une discussion pour éviter de répondre franchement", "Faire cuire un poisson dans un liquide", "Être incapable de nager"], correctAnswer: "Embrouiller une discussion pour éviter de répondre franchement" },
        ];

        // --- Configuration des Paliers ---
        const PALIER_CONFIG = {
            "Normal": { // Niv 1-4
                7: { 1: 2, 2: 2, 3: 2, 4: 1 }, // 2xNiv1, 2xNiv2, 2xNiv3, 1xNiv4
                10: { 1: 3, 2: 3, 3: 2, 4: 2 },
                16: { 1: 4, 2: 4, 3: 4, 4: 4 }
            },
            "Hard": { // Niv 2-5
                7: { 2: 2, 3: 2, 4: 2, 5: 1 },
                10: { 2: 3, 3: 3, 4: 3, 5: 1 }, // Exemple utilisateur
                16: { 2: 4, 3: 4, 4: 4, 5: 4 }
            },
            "Hardcore": { // Niv 3-6
                7: { 3: 2, 4: 2, 5: 2, 6: 1 },
                10: { 3: 3, 4: 3, 5: 2, 6: 2 },
                16: { 3: 4, 4: 4, 5: 4, 6: 4 }
            },
            "Hell": { // Niv 4-7
                7: { 4: 2, 5: 2, 6: 2, 7: 1 },
                10: { 4: 3, 5: 3, 6: 3, 7: 1 },
                16: { 4: 5, 5: 5, 6: 5, 7: 1 } // Total 16
            },
            "Void": { // Niv 7-8
                7: { 7: 6, 8: 1 },
                10: { 7: 8, 8: 2 },
                16: { 7: 10, 8: 6 }
            }
        };

        // --- Éléments du DOM ---
        const menuScreen = document.getElementById('menu-screen');
        const palierSelectScreen = document.getElementById('palier-select-screen');
        const questionCountScreen = document.getElementById('question-count-screen');
        const trainingSelectScreen = document.getElementById('training-select-screen');
        const gameWorld = document.getElementById('game-world');
        const gameOverScreen = document.getElementById('game-over-screen');
        const victoryScreen = document.getElementById('victory-screen');

        const campaignBtn = document.getElementById('campaign-btn');
        const trainingBtn = document.getElementById('training-btn');
        const gameOverMenuBtn = document.getElementById('game-over-menu-btn');
        const victoryMenuBtn = document.getElementById('victory-menu-btn');

        const hudLevelLabel = document.getElementById('hud-level-label');
        const hudLevelValue = document.getElementById('hud-level-value');
        const hudQuestionCount = document.getElementById('hud-question-count');
        const hudScoreValue = document.getElementById('hud-score-value');
        const hudLivesValue = document.getElementById('hud-lives-value');
        const hudTimerValue = document.getElementById('hud-timer-value');
        const animatedBg = document.getElementById('animated-bg');

        const questionContainer = document.getElementById('question-container');
        const definitionContent = document.getElementById('definition-content');
        const expressionOptionsContainer = document.getElementById('expression-options-container');

        const wordInputArea = document.getElementById('word-input-area');
        const expressionInputArea = document.getElementById('expression-input-area');
        const answerInput = document.getElementById('answer-input');
        const hintText = document.getElementById('hint-text');

        const jokerButton = document.getElementById('joker-button');
        const jokerStatus = document.getElementById('joker-status');
        const hintButton = document.getElementById('hint-button');
        const secondMeaningButton = document.getElementById('second-meaning-button');

        const resultBox = document.getElementById('result-box');
        const resultWord = document.getElementById('result-word');
        const resultDefinition = document.getElementById('result-definition');

        const feedbackOverlay = document.getElementById('feedback-overlay');
        const levelTransitionOverlay = document.getElementById('level-transition-overlay');
        const levelTransitionText = document.getElementById('level-transition-text');

        const finalScoreDisplay = document.getElementById('final-score-display');
        const finalScoreVictoryDisplay = document.getElementById('final-score-victory-display');
        const finalScoreSummary = document.getElementById('final-score-summary');
        const victoryScoreSummary = document.getElementById('victory-score-summary');
        const questionCountTitle = document.getElementById('question-count-title');


        // --- Gestion Audio ---

        // On suppose que videoplayback.mp3 existe, sinon ça va générer une erreur.
        // Si vous utilisez un fichier MP3/M4A, assurez-vous qu'il est accessible.
        const bgm = new Audio('videoplayback.mp3');
        bgm.loop = true;

        let audioCtx;
        let userHasInteracted = false;

        function initAudio() {
            if (!userHasInteracted) {
                userHasInteracted = true;
                if (!audioCtx) {
                    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                    console.log("AudioContext initialisé.");
                }
            }
        }

        function playSound(type) {
            if (!audioCtx) return;

            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            gainNode.gain.setValueAtTime(0, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioCtx.currentTime + 0.01);

            if (type === 'click') {
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(880, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1);
                oscillator.start(audioCtx.currentTime);
                oscillator.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'correct') {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(1046.50, audioCtx.currentTime + 0.2);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.2);
                oscillator.start(audioCtx.currentTime);
                oscillator.stop(audioCtx.currentTime + 0.2);
            } else if (type === 'wrong') {
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(220, audioCtx.currentTime);
                oscillator.frequency.linearRampToValueAtTime(110, audioCtx.currentTime + 0.3);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
                oscillator.start(audioCtx.currentTime);
                oscillator.stop(audioCtx.currentTime + 0.3);
            }
        }

        function playMusic() {
            if (!userHasInteracted) return;
            if (bgm.paused) {
                bgm.play().catch(e => console.warn("Lecture BGM bloquée.", e));
            }
        }

        function stopMusic() {
            bgm.pause();
            bgm.currentTime = 0;
        }

        // --- Variables d'état du jeu ---
        let gameState = {
            isCampaignMode: false,
            currentLevel: 1, // Pour training
            currentPalier: null, // "Normal"
            totalQuestions: 0, // 7, 10, 16
            questionQueue: [], // [1, 1, 2, 2, 3, 3, 4]
            currentQuestionIndex: 0,

            score: 0,
            lives: 3,
            jokerUsedThisLevel: false, // Joker réinitialisé à chaque niveau

            usedWords: new Set(),
            sessionWords: [],

            gameTimer: 30,
            gameTimerInterval: null,
            revealInterval: null,
            isGamePaused: false,

            // NOUVEAU: Pour ne montrer l'écran de transition de niveau qu'une fois
            levelTransitionShown: {}
        };

        let currentWordObject = null;
        let currentQuestionType = 'word';
        let currentExpressionObject = null;
        let hintUsed = false;
        let secondMeaningUsed = false;

        let currentVisibleScreen = menuScreen;
        const LIVES_SYMBOLS = ['💔💔💔', '❤️💔💔', '❤️❤️💔', '❤️❤️❤️'];

        // --- Fonctions de Gestion ---
        function showScreen(screenElement) {
            if (currentVisibleScreen) {
                currentVisibleScreen.classList.remove('visible');
            }
            setTimeout(() => {
                screenElement.classList.add('visible');
                currentVisibleScreen = screenElement;
            }, 50);
        }
        window.showScreen = showScreen; // Exposer pour le 'onclick' HTML

        // Fonctions de navigation globale pour les boutons HTML
        function goToMenu() {
            playSound('click');
            showScreen(menuScreen);
        }
        function goToPalierSelect() {
            playSound('click');
            showScreen(palierSelectScreen);
        }
        window.goToMenu = goToMenu;
        window.goToPalierSelect = goToPalierSelect;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function normalizeString(str) {
            return str.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        }

        function updateTheme(level) {
            let phase = Math.ceil(level / 2);
            if (phase > 4) phase = 4;
            if (phase < 1) phase = 1;

            document.body.className = `theme-phase-${phase}`;
            // Si on est déjà en mode boss, on garde la classe
            if (document.body.classList.contains('boss-battle')) {
                document.body.classList.add(`theme-phase-${phase}`);
            }

            animatedBg.style.background = `linear-gradient(135deg, var(--bg-color-1), var(--bg-color-2))`;
        }

        // --- Génération du Starfield ---
        function createStars() {
            function genShadow(count, size) {
                let shadow = [];
                // On génère les étoiles dans un carré de 2000x2000px centré
                for (let i = 0; i < count; i++) {
                    shadow.push(`${Math.random() * 2000 - 1000}px ${Math.random() * 2000 - 1000}px #fff`);
                }
                return shadow.join(',');
            }

            // Génère 3 couches d'étoiles avec box-shadow
            const s1 = genShadow(700, 1); // 700 petites étoiles
            const s2 = genShadow(200, 2); // 200 moyennes
            const s3 = genShadow(100, 3); // 100 grosses

            document.getElementById('stars-small').style.boxShadow = s1;
            document.getElementById('stars-medium').style.boxShadow = s2;
            document.getElementById('stars-large').style.boxShadow = s3;
        }


        // Transition "NIVEAU" / "BOSS"
        async function showLevelTransition(text) {
            gameState.isGamePaused = true;
            levelTransitionText.textContent = text;

            if (text.toUpperCase() === "BOSS") {
                levelTransitionText.classList.add('boss');
                document.body.classList.add('boss-battle'); // Active l'hyper-vitesse
            } else {
                levelTransitionText.classList.remove('boss');
                // On ne retire PAS 'boss-battle' ici, on le fait à la fin du jeu
            }

            levelTransitionOverlay.classList.add('visible');

            await new Promise(resolve => setTimeout(resolve, 2000));

            levelTransitionOverlay.classList.remove('visible');
            // La fonction appelante (loadNextWord / startGame...) remettra isGamePaused à false
        }

        async function showFeedback(type) {
            gameState.isGamePaused = true;
            feedbackOverlay.className = `flash-${type}`;
            await new Promise(resolve => setTimeout(resolve, 400));
            feedbackOverlay.className = '';
        }

        async function showResultBox(type, word, definition) {
            resultWord.textContent = word;
            resultDefinition.textContent = definition;
            resultBox.className = type; // 'correct', 'wrong', ou 'pass'

            wordInputArea.style.display = 'none';
            expressionInputArea.style.display = 'none';
            resultBox.classList.add('visible');

            let duration = (type === 'pass') ? 3000 : 2500;
            await new Promise(resolve => setTimeout(resolve, duration));

            resultBox.classList.remove('visible');
            // La pause est gérée par loadNextWord()
        }

        function generateQuestionQueue(palier, count) {
            const distribution = PALIER_CONFIG[palier][count];
            let queue = [];

            // Tri par niveau pour l'ordre
            const sortedLevels = Object.keys(distribution).map(Number).sort((a, b) => a - b);

            for (const level of sortedLevels) {
                for (let i = 0; i < distribution[level]; i++) {
                    queue.push(level);
                }
            }
            // On ne mélange PAS la file d'attente
            return queue;
        }

        // --- Logique de Jeu ---

        // Entraînement
        async function startGameTraining(level) {
            playSound('click');

            gameState.isCampaignMode = false;
            gameState.currentLevel = level;
            gameState.score = 0;
            gameState.lives = 3;
            gameState.usedWords.clear();
            gameState.sessionWords = [];
            gameState.levelTransitionShown = {}; // Réinitialise l'affichage

            updateHUD();
            playMusic();

            showScreen(gameWorld);

            // Transition de niveau (une seule fois au début)
            await showLevelTransition("NIVEAU " + level);
            gameState.levelTransitionShown[level] = true; // Marque comme montré

            gameState.isGamePaused = false;
            updateTheme(level);

            loadNextWord();
        }

        // Campagne
        async function startGameCampaign() {
            gameState.isCampaignMode = true;
            gameState.score = 0;
            gameState.lives = 3;
            gameState.jokerUsedThisLevel = false;
            gameState.currentQuestionIndex = 0;
            gameState.usedWords.clear();
            gameState.sessionWords = [];
            gameState.questionQueue = generateQuestionQueue(gameState.currentPalier, gameState.totalQuestions);
            gameState.levelTransitionShown = {}; // Réinitialise l'affichage

            updateHUD();
            playMusic();
            showScreen(gameWorld);

            // Transition de palier (au tout début)
            await showLevelTransition(gameState.currentPalier.toUpperCase());

            gameState.isGamePaused = false;
            // loadNextWord s'occupera d'afficher "NIVEAU 1"
            loadNextWord();
        }

        function updateHUD() {
            if (gameState.isCampaignMode) {
                hudLevelLabel.textContent = gameState.currentPalier.toUpperCase();

                // Le niveau est celui de la question actuelle/prochaine.
                const currentLevelToDisplay = gameState.questionQueue[gameState.currentQuestionIndex] || 1;
                hudLevelValue.textContent = currentLevelToDisplay;

                // Affichage du compteur: Question Actuelle (Index + 1) / Total
                hudQuestionCount.textContent = `${gameState.currentQuestionIndex + 1}/${gameState.totalQuestions}`;

                jokerButton.style.display = 'block';
                // Vérifie jokerUsedThisLevel
                if (gameState.jokerUsedThisLevel) {
                    jokerStatus.textContent = "UTILISÉ";
                    jokerStatus.classList.remove('text-amber-400');
                    jokerStatus.classList.add('text-red-500');
                    jokerButton.disabled = true;
                } else {
                    jokerStatus.textContent = "PRÊT";
                    jokerStatus.classList.add('text-amber-400');
                    jokerStatus.classList.remove('text-red-500');
                    jokerButton.disabled = false;
                }

            } else { // Mode Entraînement
                hudLevelLabel.textContent = "NIVEAU";
                hudLevelValue.textContent = gameState.currentLevel;
                hudQuestionCount.textContent = '??/??';
                jokerButton.style.display = 'none';
            }

            hudScoreValue.textContent = gameState.score;
            hudLivesValue.textContent = LIVES_SYMBOLS[gameState.lives];
        }

        function getPool(list, level) {
            const fullPool = list.filter(item => item.level === level);

            if (fullPool.length === 0) {
                console.error(`Aucun mot trouvé pour le niveau ${level}!`);
                return null;
            }

            let availablePool = fullPool.filter(item => !gameState.usedWords.has(item.word || item.expression));

            if (availablePool.length === 0) {
                console.log(`Réinitialisation du pool pour le niveau ${level}`);
                fullPool.forEach(item => gameState.usedWords.delete(item.word || item.expression));
                availablePool = [...fullPool];
            }

            const shuffledPool = shuffleArray(availablePool);
            const selected = shuffledPool[0];

            if (!selected) {
                console.error("Erreur de sélection, pool vide après reset ?");
                return null;
            }

            gameState.usedWords.add(selected.word || selected.expression);
            // On n'ajoute que les mots de définition pour le résumé de fin de partie
            if (selected.word) gameState.sessionWords.push(selected);

            return selected;
        }

        async function loadNextWord() {
            // S'il était en pause suite au résultat précédent (Correct/Incorrect/Joker), on le débloque
            if (gameState.isGamePaused) {
                gameState.isGamePaused = false;
            }

            if (gameState.isCampaignMode && gameState.currentQuestionIndex >= gameState.totalQuestions) {
                gameWon();
                return;
            }

            const expressionChance = 0.15;
            // Le niveau de la question est déterminé par l'index actuel
            const currentLevel = gameState.isCampaignMode ? gameState.questionQueue[gameState.currentQuestionIndex] : gameState.currentLevel;

            if (gameState.isCampaignMode) {
                let transitionText = "";
                // Le niveau précédent est le niveau de la question QUI VIENT D'ÊTRE JOUÉE (index - 1)
                const prevLevel = (gameState.currentQuestionIndex > 0) ? gameState.questionQueue[gameState.currentQuestionIndex - 1] : -1;

                // BOSS: Si l'index actuel est le dernier de la file (par exemple, 9ème question sur 10)
                if (gameState.currentQuestionIndex === gameState.totalQuestions - 1) {
                    transitionText = "BOSS";

                }
                // Transition de niveau normale: si le niveau change ET que la transition n'a pas été montrée pour ce niveau
                else if (currentLevel !== prevLevel && !gameState.levelTransitionShown[currentLevel]) {
                    transitionText = "NIVEAU " + currentLevel;
                }

                if (transitionText) {
                    await showLevelTransition(transitionText); // Ceci met le jeu en pause

                    // --- CORRECTION DU BLOCAGE: DÉBLOQUER APRÈS LA TRANSITION ---
                    gameState.isGamePaused = false;

                    gameState.levelTransitionShown[currentLevel] = true; // Marque comme montré

                    // Réinitialiser le Joker UNIQUEMENT si le niveau change
                    if (currentLevel !== prevLevel) {
                        gameState.jokerUsedThisLevel = false;
                    }
                }
            }

            updateTheme(currentLevel);
            updateHUD(); // Mettra à jour l'état du Joker si réinitialisé

            if (Math.random() < expressionChance && currentLevel <= 8) {
                currentQuestionType = 'expression';
                loadExpressionQuestion(currentLevel);
            } else {
                currentQuestionType = 'word';
                loadWordQuestion(currentLevel);
            }
        }

        function loadWordQuestion(level) {
            currentWordObject = getPool(wordList, level);

            if (!currentWordObject) {
                console.error("Erreur critique: getPool n'a rien retourné (Niveau " + level + ").");
                // Dans ce cas, si on est en campagne, on avance pour éviter une boucle infinie de chargement vide
                if (gameState.isCampaignMode) gameState.currentQuestionIndex++;
                if (gameState.lives > 0) setTimeout(loadNextWord, 100);
                return;
            }

            wordInputArea.style.display = 'flex';
            expressionInputArea.style.display = 'none';
            expressionOptionsContainer.style.display = 'none';
            definitionContent.style.display = 'block';

            hintButton.style.display = 'block';
            hintButton.disabled = false;
            hintUsed = false;
            hintText.textContent = '';

            if (currentWordObject.definitions.length > 1) {
                secondMeaningButton.style.display = 'block';
                secondMeaningButton.disabled = false;
                secondMeaningUsed = false;
            } else {
                secondMeaningButton.style.display = 'none';
            }

            answerInput.value = '';
            answerInput.disabled = false;

            displayDefinitionProgressively(currentWordObject.definitions[0]);
            questionContainer.classList.add('visible');
            answerInput.focus();
            startTimer(level);
        }

        function loadExpressionQuestion(level) {
            currentExpressionObject = getPool(expressionList, level);

            if (!currentExpressionObject) {
                console.error("Erreur critique: getPool n'a rien retourné pour les expressions (Niveau " + level + ").");
                // Dans ce cas, si on est en campagne, on avance pour éviter une boucle infinie de chargement vide
                if (gameState.isCampaignMode) gameState.currentQuestionIndex++;
                if (gameState.lives > 0) setTimeout(loadNextWord, 100);
                return;
            }

            if (gameState.revealInterval) clearInterval(gameState.revealInterval);

            wordInputArea.style.display = 'none';
            expressionInputArea.style.display = 'block';
            definitionContent.style.display = 'block';
            expressionOptionsContainer.style.display = 'grid';

            definitionContent.innerHTML = `<span class="font-arcade-text">${currentExpressionObject.expression}</span>`;

            hintButton.style.display = 'none';
            secondMeaningButton.style.display = 'none';

            expressionOptionsContainer.innerHTML = '';
            const shuffledOptions = shuffleArray([...currentExpressionObject.options]);
            shuffledOptions.forEach(optionText => {
                const button = document.createElement('button');
                button.className = 'expression-btn';
                button.textContent = optionText;
                button.onclick = () => checkExpressionAnswer(button);
                expressionOptionsContainer.appendChild(button);
            });

            questionContainer.classList.add('visible');
            startTimer(level);
        }

        function displayDefinitionProgressively(definition) {
            if (gameState.revealInterval) clearInterval(gameState.revealInterval);

            // Le texte et le caret sont affichés avec la police VT323
            definitionContent.innerHTML = '<span id="typing-text"></span><span id="typing-caret">|</span>';
            const textSpan = document.getElementById('typing-text');
            const caretSpan = document.getElementById('typing-caret');

            let charIndex = 0;

            let level = gameState.isCampaignMode ? gameState.questionQueue[gameState.currentQuestionIndex] : gameState.currentLevel;
            let revealSpeed = 50 - (level * 4);
            if (revealSpeed < 10) revealSpeed = 10;

            gameState.revealInterval = setInterval(() => {
                if (gameState.isGamePaused) {
                    // Si le jeu est en pause (ex: transition de niveau), on met en pause le défilement
                    return;
                }

                if (charIndex < definition.length) {
                    textSpan.innerHTML += definition.charAt(charIndex);
                    charIndex++;
                } else {
                    clearInterval(gameState.revealInterval);
                    gameState.revealInterval = null;
                    if (caretSpan) {
                        caretSpan.style.display = 'none';
                    }
                }
            }, revealSpeed);
        }

        function startTimer(level) {
            if (gameState.gameTimerInterval) clearInterval(gameState.gameTimerInterval);

            let baseTime = 30 - level;
            if (baseTime < 10) baseTime = 10;
            gameState.gameTimer = baseTime;

            hudTimerValue.textContent = gameState.gameTimer;
            hudTimerValue.classList.remove('text-red-500', 'font-bold');

            gameState.gameTimerInterval = setInterval(() => {
                if (gameState.isGamePaused) return;

                gameState.gameTimer--;
                hudTimerValue.textContent = gameState.gameTimer;

                if (gameState.gameTimer <= 5) {
                    hudTimerValue.classList.add('text-red-500', 'font-bold');
                }

                if (gameState.gameTimer <= 0) {
                    clearInterval(gameState.gameTimerInterval);
                    handleIncorrectAnswer('timeout');
                }
            }, 1000);
        }

        function checkAnswer() {
            if (gameState.isGamePaused) return;
            const userAnswer = normalizeString(answerInput.value);
            const correctAnswer = normalizeString(currentWordObject.word);

            if (userAnswer === correctAnswer) {
                handleCorrectAnswer();
            } else {
                playSound('wrong');
                answerInput.classList.add('shake-error');
                setTimeout(() => answerInput.classList.remove('shake-error'), 500);
            }
        }

        function checkExpressionAnswer(buttonElement) {
            if (gameState.isGamePaused) return;

            clearInterval(gameState.gameTimerInterval);
            gameState.isGamePaused = true;

            const selectedOption = buttonElement.textContent;
            const isCorrect = (selectedOption === currentExpressionObject.correctAnswer);

            document.querySelectorAll('.expression-btn').forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === currentExpressionObject.correctAnswer) {
                    btn.classList.add('correct');
                } else if (btn === buttonElement) {
                    btn.classList.add('wrong');
                }
            });

            if (isCorrect) {
                handleCorrectAnswer();
            } else {
                handleIncorrectAnswer('wrong_choice');
            }
        }

        async function handleCorrectAnswer() {
            gameState.isGamePaused = true;
            playSound('correct');
            clearInterval(gameState.gameTimerInterval);
            if (gameState.revealInterval) clearInterval(gameState.revealInterval);

            answerInput.disabled = true;

            const currentLevel = gameState.isCampaignMode ? gameState.questionQueue[gameState.currentQuestionIndex] : gameState.currentLevel;
            let pointsWon = 10 * currentLevel;
            if (currentQuestionType === 'word') {
                if (hintUsed) pointsWon *= 0.75;
                if (secondMeaningUsed) pointsWon *= 0.75;
            }
            gameState.score += Math.round(pointsWon);

            questionContainer.classList.remove('visible');
            await showFeedback('correct');

            const word = currentQuestionType === 'word' ? currentWordObject.word : currentExpressionObject.expression;
            const def = currentQuestionType === 'word' ? currentWordObject.definitions.join(' / ') : currentExpressionObject.correctAnswer;
            await showResultBox('correct', word, def);

            // --- CORRECTION 1: AVANCEMENT UNIQUEMENT SI BONNE RÉPONSE ---
            if (gameState.isCampaignMode) gameState.currentQuestionIndex++;
            loadNextWord();
        }

        async function handleIncorrectAnswer(reason) {
            gameState.isGamePaused = true;
            playSound('wrong');
            clearInterval(gameState.gameTimerInterval);
            if (gameState.revealInterval) clearInterval(gameState.revealInterval);

            gameState.lives--;
            answerInput.disabled = true;

            questionContainer.classList.remove('visible');
            await showFeedback('wrong');

            const word = currentQuestionType === 'word' ? currentWordObject.word : currentExpressionObject.expression;
            const def = currentQuestionType === 'word' ? currentWordObject.definitions.join(' / ') : `La bonne réponse était : ${currentExpressionObject.correctAnswer}`;
            await showResultBox('wrong', word, def);

            if (gameState.lives <= 0) {
                setTimeout(gameOver, 500);
            } else {
                // --- CORRECTION 1: PAS D'AVANCEMENT EN CAS D'ERREUR ---
                // if (gameState.isCampaignMode) gameState.currentQuestionIndex++; // Supprimé
                loadNextWord(); // Recharge la même question / le même niveau
            }
        }

        function returnToMenu() {
            playSound('click');
            if (gameState.gameTimerInterval) clearInterval(gameState.gameTimerInterval);
            if (gameState.revealInterval) clearInterval(gameState.revealInterval);
            gameState.isGamePaused = false;
            document.body.classList.remove('boss-battle'); // Nettoyer le mode boss

            playMusic();
            showScreen(menuScreen);
        }

        // Game Over / Victoire
        function gameWon() {
            stopMusic();
            document.body.classList.remove('boss-battle'); // Nettoyer le mode boss
            finalScoreVictoryDisplay.textContent = gameState.score;
            displaySummary(victoryScoreSummary);
            showScreen(victoryScreen);
        }

        function gameOver() {
            stopMusic();
            document.body.classList.remove('boss-battle'); // Nettoyer le mode boss
            finalScoreDisplay.textContent = gameState.score;
            displaySummary(finalScoreSummary);
            showScreen(gameOverScreen);
        }

        function displaySummary(containerElement) {
            const listHeader = containerElement.querySelector('h3');
            containerElement.querySelectorAll('.summary-item').forEach(item => item.remove());

            if (gameState.sessionWords.length === 0) {
                listHeader.insertAdjacentHTML('afterend', '<p class="summary-item text-gray-400">Aucun mot n\'a été rencontré.</p>');
                return;
            }

            let summaryHTML = '';
            gameState.sessionWords.forEach(wordObj => {
                summaryHTML += `
                    <div class="summary-item py-2 border-b border-gray-800 last:border-b-0">
                        <strong class="text-white">${wordObj.word}</strong>:
                        <span class="text-gray-300">${wordObj.definitions[0]}</span>
                    </div>
                `;
            });
            listHeader.insertAdjacentHTML('afterend', summaryHTML);
        }

        document.addEventListener('DOMContentLoaded', () => {

            // --- Génération du fond étoilé ---
            createStars();

            // --- Attachements des événements principaux ---

            // Entraînement (Écran de sélection)
            trainingSelectScreen.querySelectorAll('.menu-btn[data-level]').forEach(btn => {
                btn.onclick = () => startGameTraining(parseInt(btn.dataset.level));
            });

            // Campagne (Bouton menu)
            campaignBtn.onclick = () => {
                playSound('click');
                showScreen(palierSelectScreen);
            };

            // Entraînement (Bouton menu)
            trainingBtn.onclick = () => {
                playSound('click');
                showScreen(trainingSelectScreen);
            };

            // Sélection Palier
            palierSelectScreen.querySelectorAll('.menu-btn[data-palier]').forEach(btn => {
                btn.onclick = () => {
                    playSound('click');
                    gameState.currentPalier = btn.dataset.palier;
                    questionCountTitle.textContent = `Palier ${gameState.currentPalier}`;
                    showScreen(questionCountScreen);
                }
            });

            // Sélection Nombre de Questions
            questionCountScreen.querySelectorAll('.menu-btn[data-count]').forEach(btn => {
                btn.onclick = () => {
                    playSound('click');
                    gameState.totalQuestions = parseInt(btn.dataset.count);
                    startGameCampaign();
                }
            });

            // Boutons de jeu
            jokerButton.onclick = async () => {
                // Vérifie que le Joker est PRÊT, mode campagne activé et jeu non en pause
                if (gameState.jokerUsedThisLevel || !gameState.isCampaignMode || gameState.isGamePaused) return;

                playSound('click');
                gameState.isGamePaused = true;
                clearInterval(gameState.gameTimerInterval);
                if (gameState.revealInterval) clearInterval(gameState.revealInterval);

                // 1. Marquer comme utilisé et màj HUD
                gameState.jokerUsedThisLevel = true;
                updateHUD();

                // 2. Afficher la réponse
                questionContainer.classList.remove('visible');

                const word = currentQuestionType === 'word' ? currentWordObject.word : currentExpressionObject.expression;
                const def = currentQuestionType === 'word' ? currentWordObject.definitions.join(' / ') : `La bonne réponse était : ${currentExpressionObject.correctAnswer}`;

                // Affiche la réponse en "pass" (Ambre)
                await showResultBox('pass', word, def);

                // 3. PAS D'AVANCEMENT EN CAS DE JOKER UTILISÉ
                // On ne fait pas gameState.currentQuestionIndex++ ici. La question sera rechargée au prochain tour.

                // 4. Charger la question suivante (qui sera la même que la précédente)
                loadNextWord();
            };

            hintButton.onclick = () => {
                if (hintUsed || !currentWordObject || gameState.isGamePaused) return;
                playSound('click');
                hintUsed = true;
                hintButton.disabled = true;
                const firstLetter = currentWordObject.word.charAt(0).toUpperCase();
                hintText.textContent = `Commence par : ${firstLetter}`;
            };

            secondMeaningButton.onclick = () => {
                if (secondMeaningUsed || !currentWordObject || currentWordObject.definitions.length <= 1 || gameState.isGamePaused) return;

                playSound('click');
                secondMeaningUsed = true;
                secondMeaningButton.disabled = true;
                if (gameState.revealInterval) clearInterval(gameState.revealInterval);

                displayDefinitionProgressively(currentWordObject.definitions.join('\n\n---\n\n'));
            };

            // Boutons de fin de partie
            gameOverMenuBtn.onclick = returnToMenu;
            victoryMenuBtn.onclick = returnToMenu;

            // Saisie
            answerInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !answerInput.disabled) {
                    checkAnswer();
                }
            });

            // Initialisation de l'audio (une seule fois au premier clic)
            document.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('click', () => {
                    initAudio();
                    playMusic();
                }, { once: true });
            });

            // --- Démarrage ---
            showScreen(menuScreen);
            updateTheme(1); // Init theme
        });

    </script>
</body>


</html>


